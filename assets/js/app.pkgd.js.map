{"version":3,"sources":["Article.class.js","Index.class.js","View.class.js","layout.js"],"names":["Article","$btns","close","$","prev","next","$html","window","view","this","init","userData","addClass","on","location","href","urls","removeClass","off","e","keyCode","history","pushState","path","pathname","search","type","url","title","text","destroy","Index","self","$$","items","body","category","loading","itemSizeToClass","w","h","str","updateUrl","params","urlArray","split","JSON","parse","decodeURI","replace","Object","page","parseInt","key","loadItems","func","ajax","dataType","timeout","error","request","status","log","success","res","req","markup","$newItems","sizeClass","i","length","width","height","more","img","not","children","closest","open","attr","filter","$more","loadItemsUrl","gotoTop","offset","top","find","focus","imagesLoaded","masonry","remove","append","masonryOptions","data","masonryLayoutComplete","paddingTop","animate","scrollTop","View","itemSelector","columnWidth","toggleClass","dom","index","bg","topNav","speed","active","directionButtons","$article","updateURL","sw","show","fadeIn","hide","load","go","fadeOut","empty","$viewItem","targetTop","jQuery","document","documentElement","$lnb","flag","$li","parent","setTimeout","hasClass","event","originalEvent","state","reload","trigger","s","o","g","r","a","m","q","push","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","ga"],"mappings":"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","file":"app.pkgd.js","sourcesContent":["function Article()\n{\n\tvar $btns = {\n\t\tclose : $('button.closeView')\n\t\t,prev : $('button.prevView')\n\t\t,next : $('button.nextView')\n\t};\n\tvar $html = $('html');\n\n\n\twindow.view = null;\n\n\tthis.init = function(userData)\n\t{\n\t\t// set class\n\t\t$html.addClass('mode-view');\n\t\t$('#topNav').addClass('on');\n\n\t\t// close button event\n\t\t$btns.close.on('click', function(){\n\t\t\twindow.location.href = userData.urls.close;\n\t\t\treturn false;\n\t\t});\n\n\t\t// prev button event\n\t\tif (userData.urls.prev)\n\t\t{\n\t\t\t$btns.prev\n\t\t\t\t.removeClass('disabled')\n\t\t\t\t.on('click', function(){\n\t\t\t\t\twindow.location.href = userData.urls.prev;\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$btns.prev.off('click');\n\t\t}\n\n\t\t// next button event\n\t\tif (userData.urls.next)\n\t\t{\n\t\t\t$btns.next\n\t\t\t\t.removeClass('disabled')\n\t\t\t\t.on('click', function(){\n\t\t\t\t\twindow.location.href = userData.urls.next;\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$btns.next.off('click');\n\t\t}\n\n\t\t// keyboard event\n\t\t$html.on('keyup.gooseView', function(e){\n\t\t\tswitch(e.keyCode)\n\t\t\t{\n\t\t\t\tcase 27:\n\t\t\t\t\t// esc\n\t\t\t\t\twindow.location.href = userData.urls.close;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37:\n\t\t\t\t\t// left\n\t\t\t\t\tif (userData.urls.prev)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.href = userData.urls.prev;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t// right\n\t\t\t\t\tif (userData.urls.next)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.href = userData.urls.next;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\t// update url\n\t\tif (history.pushState)\n\t\t{\n\t\t\tvar path = window.location.pathname + window.location.search;\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'index'\n\t\t\t\t,url : userData.urls.close\n\t\t\t}, userData.title, userData.urls.close);\n\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'article'\n\t\t\t\t,url : path\n\t\t\t}, $('title').text(), path);\n\t\t}\n\t};\n\n\tthis.destroy = function()\n\t{\n\n\t}\n}\n","function Index(userData)\n{\n\t// set variables\n\tvar self = this;\n\tvar $$ = {\n\t\titems : $('#items')\n\t\t,body : $('html, body')\n\t\t,category : $('#categoryList')\n\t\t,loading : null\n\t};\n\n\n\t// item size to class\n\tvar itemSizeToClass = function(w, h)\n\t{\n\t\tvar str = '';\n\t\tstr += (w == 470) ? ' wx2' : '';\n\t\tstr += (h == 470) ? ' hx2' : '';\n\t\treturn str;\n\t};\n\n\t// update url\n\tthis.updateUrl = function(url)\n\t{\n\t\tvar params = null;\n\t\tvar urlArray = url.split('?');\n\t\tvar str = '';\n\n\t\tif (urlArray[1])\n\t\t{\n\t\t\tparams = JSON.parse('{\"' + decodeURI(urlArray[1]).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparams = new Object();\n\t\t}\n\n\t\tparams.page = (params.page) ? parseInt(params.page) + 1 : 2;\n\n\t\tfor (var key in params)\n\t\t{\n\t\t\tif (str != \"\")\n\t\t\t{\n\t\t\t\tstr += \"&\";\n\t\t\t}\n\t\t\tstr += key + \"=\" + params[key];\n\t\t}\n\t\tparams = str;\n\n\t\treturn urlArray[0] + '?' + params;\n\t};\n\n\t// load items\n\tthis.loadItems = function(url, func)\n\t{\n\t\t$.ajax({\n\t\t\ttype : 'get'\n\t\t\t,url : url\n\t\t\t,dataType : 'json'\n\t\t\t,timeout : 3000\n\t\t\t,error : function(request, status, error)\n\t\t\t{\n\t\t\t\tlog('error message');\n\t\t\t\tlog(error);\n\t\t\t}\n\t\t\t,success : function(res, status, req)\n\t\t\t{\n\t\t\t\tvar markup = '';\n\t\t\t\tvar $newItems = null;\n\t\t\t\tvar sizeClass = null;\n\t\t\t\tfor (var i=0; i<res.length; i++)\n\t\t\t\t{\n\t\t\t\t\tsizeClass = itemSizeToClass(res[i].width, res[i].height);\n\t\t\t\t\tif (res[i].more)\n\t\t\t\t\t{\n\t\t\t\t\t\tmarkup += '<a href=\"#\" class=\"item more\" title=\"more item\"><span><em><i>More item</i></em></span></a>';\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmarkup += '<div class=\"item' + sizeClass + '\"><a href=\"' + res[i].url + '\"><img src=\"' + res[i].img + '\" alt=\"' + res[i].title + '\" /></a></div>';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$newItems = $(markup);\n\n\t\t\t\t// click item\n\t\t\t\t$newItems.not('div.more').children('a').on('click', function(e){\n\t\t\t\t\tif (window.history.pushState)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.history.pushState({\n\t\t\t\t\t\t\ttype : 'index'\n\t\t\t\t\t\t\t,url : window.location.pathname + window.location.search\n\t\t\t\t\t\t}, userData.title, window.location.pathname + window.location.search);\n\t\t\t\t\t}\n\t\t\t\t\t$(this).closest('div.item').addClass('view');\n\t\t\t\t\tview.open($(this).attr('href'), true);\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\n\t\t\t\t// more event\n\t\t\t\t$newItems.filter('.more').on('click', function(e){\n\t\t\t\t\tvar $more = $(this);\n\t\t\t\t\tuserData.loadItemsUrl = self.updateUrl(userData.loadItemsUrl);\n\n\t\t\t\t\tvar url = self.updateUrl(window.location.pathname + location.search);\n\t\t\t\t\tif (window.history.pushState)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.history.pushState({}, userData.title, url);\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.gotoTop = $more.offset().top;\n\n\t\t\t\t\t$more.off('click');\n\t\t\t\t\t$more.addClass('loading');\n\t\t\t\t\t$$.loading = $more;\n\n\t\t\t\t\tself.loadItems(userData.loadItemsUrl, function(){\n\t\t\t\t\t\t$more.next().find('a').focus();\n\t\t\t\t\t});\n\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\n\t\t\t\t$newItems.imagesLoaded(function(){\n\t\t\t\t\tif ($$.loading)\n\t\t\t\t\t{\n\t\t\t\t\t\tmasonry.remove($$.loading);\n\t\t\t\t\t\t$$.loading = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (masonry)\n\t\t\t\t\t{\n\t\t\t\t\t\t$$.items.masonry()\n\t\t\t\t\t\t\t.append($newItems)\n\t\t\t\t\t\t\t.masonry('appended', $newItems)\n\t\t\t\t\t\t\t.masonry('layout')\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$$.items\n\t\t\t\t\t\t\t.append($newItems)\n\t\t\t\t\t\t\t.masonry(masonryOptions)\n\t\t\t\t\t\t;\n\t\t\t\t\t\tmasonry = $$.items.data('masonry');\n\t\t\t\t\t\tmasonry.on('layoutComplete', window.masonryLayoutComplete);\n\t\t\t\t\t}\n\t\t\t\t\tif (func)\n\t\t\t\t\t{\n\t\t\t\t\t\tfunc();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\n\t/* E V E N T S */\n\t// layout complete\n\twindow.masonryLayoutComplete = function()\n\t{\n\t\tif (window.gotoTop)\n\t\t{\n\t\t\twindow.gotoTop = window.gotoTop - userData.paddingTop;\n\t\t\t$$.body.animate({scrollTop:window.gotoTop}, 400, 'swing');\n\t\t\twindow.gotoTop = null;\n\t\t}\n\t};\n\n\n\t/* A C T I O N */\n\n\t$('body').append('<div id=\"View_bg\"></div><section id=\"View\"></section>');\n\n\twindow.view = new View(userData);\n\n\t// set masonry options\n\twindow.masonryOptions = {\n\t\titemSelector: '.item'\n\t\t,columnWidth: '.grid-sizer'\n\t\t//,isAnimated: true\n\t\t//,transitionDuration : '.3s'\n\t};\n\twindow.masonry = null;\n\n\t// toggle category list\n\t$('#toggleCategory').on('click', function(){\n\t\t$(this).toggleClass('on');\n\t\t$$.category.children('ul').toggleClass('on');\n\t});\n\n\t// load items\n\tthis.loadItems(userData.loadItemsUrl);\n\n\tif (window.history.pushState)\n\t{\n\t\tvar path = window.location.pathname + window.location.search;\n\t\twindow.history.pushState({type:'index'}, userData.title, path);\n\t}\n}","var View = function(userData) {\n\n\t// private variables\n\tvar self = this;\n\tvar dom = {\n\t\tindex : $('#Index')\n\t\t,items : $('#items')\n\t\t,view : $('#View')\n\t\t,bg : $('#View_bg')\n\t\t,title : $('head > title')\n\t\t,topNav : $('#topNav')\n\t\t,body : $('html, body')\n\t};\n\tvar speed = 300;\n\tvar $html = $('html');\n\n\t// public variables\n\tthis.active = false;\n\tthis.path = null;\n\n\n\t/*----------------------------------------*\\\n\t * PRIVATE METHOD\n\t\\*----------------------------------------*/\n\n\t/**\n\t * init\n\t */\n\tvar init = function() {}\n\n\n\t/**\n\t * manage direction buttons\n\t * \n\t * @Param {DOM} $article\n\t * @Return void\n\t */\n\tvar directionButtons = function($article)\n\t{\n\t\tif ($article.attr('data-prev'))\n\t\t{\n\t\t\t$('button.prevView').removeClass('disabled');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('button.prevView').addClass('disabled');\n\t\t}\n\t\tif ($article.attr('data-next'))\n\t\t{\n\t\t\t$('button.nextView').removeClass('disabled');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('button.nextView').addClass('disabled');\n\t\t}\n\t};\n\n\t/**\n\t * update url\n\t * \n\t * @Param {Boolean} sw : write history\n\t * @Param {String} title\n\t * @Param {String} url\n\t * @Return void\n\t */\n\tvar updateURL = function(sw, title, url)\n\t{\n\t\tself.path = window.location.pathname + window.location.search;\n\t\tif (sw && window.history.pushState)\n\t\t{\n\t\t\tdom.title.text(title);\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'article'\n\t\t\t\t,url : url\n\t\t\t}, title, url);\n\t\t}\n\t};\n\n\n\t/*----------------------------------------*\\\n\t * PUBLIC METHOD\n\t\\*----------------------------------------*/\n\t\n\t/**\n\t * open view\n\t * \n\t * @Param {String} url\n\t * @Param {Boolean} sw : write history\n\t * @Return void\n\t */\n\tthis.open = function(url, sw)\n\t{\n\t\tself.active = true;\n\t\t$html.removeClass('scroll');\n\t\tdom.view.show();\n\t\tdom.bg.fadeIn(speed, function(){\n\t\t\tif (masonry)\n\t\t\t{\n\t\t\t\tmasonry.destroy();\n\t\t\t\tmasonry = null;\n\t\t\t}\n\t\t\tdom.index.hide();\n\t\t\tdom.view.load(url + ' #Article', function(){\n\t\t\t\t$('html').addClass('mode-view');\n\t\t\t\t$('#topNav').addClass('on');\n\n\t\t\t\tupdateURL(sw, $(this).children().attr('data-title'), url);\n\t\t\t\tdirectionButtons($(this).children());\n\t\t\t});\n\t\t});\n\n\t\t// keyboard event\n\t\t$html.on('keyup.gooseView', function(e){\n\t\t\tvar $article = dom.view.children();\n\t\t\tswitch(e.keyCode)\n\t\t\t{\n\t\t\t\tcase 27:\n\t\t\t\t\t// esc\n\t\t\t\t\tself.close();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37:\n\t\t\t\t\t// left\n\t\t\t\t\tif ($article.attr('data-prev'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.go($article.attr('data-prev'));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t// right\n\t\t\t\t\tif ($article.attr('data-next'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.go($article.attr('data-next'));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * close view\n\t * \n\t * @Param {Boolean} sw\n\t * @Return void\n\t */\n\tthis.close = function(sw)\n\t{\n\t\tself.active = false;\n\t\t$('button.closeView').off('click');\n\t\t$('html').off('keyup.gooseView').addClass('scroll');\n\t\t$('#topNav').removeClass('on');\n\t\tdom.index.show();\n\t\tdom.items.masonry(masonryOptions);\n\t\twindow.masonry = dom.items.data('masonry');\n\t\tmasonry.on('layoutComplete', window.masonryLayoutComplete);\n\t\tdom.bg.fadeOut(speed);\n\t\tdom.view.fadeOut(speed, function(){\n\t\t\t$('html').removeClass('mode-view');\n\t\t\t$(this).empty();\n\t\t\tvar $viewItem = dom.items.children('div.view');\n\t\t\tvar targetTop = $viewItem.offset().top - userData.paddingTop;\n\t\t\tif (targetTop > 220)\n\t\t\t{\n\t\t\t\tdom.body.scrollTop(targetTop);\n\t\t\t}\n\t\t\t$viewItem.removeClass('view');\n\t\t});\n\t\tif (sw && window.history.pushState)\n\t\t{\n\t\t\tdom.title.text(userData.title);\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'index'\n\t\t\t\t,url : self.path\n\t\t\t}, userData.title, self.path);\n\t\t}\n\t\tself.path = null;\n\t};\n\n\t/**\n\t * go view\n\t * \n\t * @Param {String} url : url address\n\t * @Return void\n\t */\n\tthis.go = function(url)\n\t{\n\t\tdom.view.load(url + ' #Article', function(){\n\t\t\tupdateURL(true, $(this).children().attr('data-title'), url);\n\t\t\tdirectionButtons($(this).children());\n\t\t});\n\t};\n\n\t// action\n\tinit();\n};","jQuery(function($){\n\n\t// check touch mode\n\tif ('ontouchstart' in document.documentElement)\n\t{\n\t\t$('html').addClass('touch');\n\t}\n\telse\n\t{\n\t\t$('html').addClass('no-touch');\n\t}\n\n\t// toggle local navigation\n\t$('#toggleNavigation').on('click', function(){\n\t\t$('#header > nav.lnb').toggleClass('on');\n\t});\n\n\t// navigation event for touch device\n\tvar $lnb = $('html.touch #header > nav.lnb');\n\tvar flag = false;\n\t$lnb.find('> ul.dep1 > li > a').on('touchend click', function(){\n\t\tvar $li = $(this).parent();\n\t\tif (!flag) {\n\t\t\tflag = true;\n\t\t\tsetTimeout(function(){ flag = false; }, 200);\n\t\t\t// ipad\n\t\t\tif ($(window).width() > 640)\n\t\t\t{\n\t\t\t\tif ($li.hasClass('on'))\n\t\t\t\t{\n\t\t\t\t\t$li.removeClass('on');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$li.parent().children().removeClass('on');\n\t\t\t\t\t$li.addClass('on');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t});\n\n\t// navigation focus event\n\t$('#header > nav.lnb > ul.dep1 > li')\n\t\t.on('focusin', function(){\n\t\t\t$(this).addClass('on');\n\t\t})\n\t\t.on('focusout', function(){\n\t\t\t$(this).removeClass('on');\n\t\t})\n\t;\n\n\t// change page event\n\t$(window).on(\"popstate\", function(event) {\n\t\tvar data = event.originalEvent.state;\n\t\tif (data)\n\t\t{\n\t\t\tswitch(data.type)\n\t\t\t{\n\t\t\t\t// go index\n\t\t\t\tcase 'index':\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (view.active)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview.close(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t// go article\n\t\t\t\tcase 'article':\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (view)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$('#items').find('a[href=\"' + data.url + '\"]').closest('div.item').addClass('view');\n\t\t\t\t\t\t\tview.open(data.url, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\n\t// navigation - active position\n\t$('#header li.active').closest('div').parent().addClass('active');\n\n\n\t// resize event\n\t$(window).on('resize', function(){\n\t\tif ($(window).width() < 640)\n\t\t{\n\t\t\t$('html').addClass('mini');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('html').removeClass('mini');\n\t\t}\n\t});\n\t$(window).trigger('resize');\n\n\n\ttry {\n\t\t// close view button event\n\t\t$('body').on('click', 'button.closeView', function(){\n\t\t\tview.close(true);\n\t\t});\n\t\n\t\t// prev view event\n\t\t$('body').on('click', 'button.prevView', function(){\n\t\t\tif (!$(this).hasClass('disabled'))\n\t\t\t{\n\t\t\t\tview.go($('#Article').attr('data-prev'));\n\t\t\t}\n\t\t});\n\n\t\t// next view event\n\t\t$('body').on('click', 'button.nextView', function(){\n\t\t\tif (!$(this).hasClass('disabled'))\n\t\t\t{\n\t\t\t\tview.go($('#Article').attr('data-next'));\n\t\t\t}\n\t\t});\n\t} catch(e) {}\n\n\n\t// Google Analytics\n\t(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n\t(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\tm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\t\n\tga('create', 'UA-42563094-1', 'redgoose.me');\n\tga('send', 'pageview');\n});"],"sourceRoot":"/source/"}