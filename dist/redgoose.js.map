{"version":3,"file":"redgoose.js","sources":["../src/js/AppHistory.js","../src/js/util.js","../src/js/preference.js","../src/js/Header.js","../src/js/Index.js","../src/js/Article.js","../src/js/etc.js","../src/js/redgoose.js"],"sourcesContent":["import $ from 'jQuery';\n\n\nexport default function AppHistory() {\n\n\tconst $title = $('head > title');\n\n\t/**\n\t * check support\n\t *\n\t * @Return {Boolean}\n\t */\n\tfunction support()\n\t{\n\t\treturn !!history.pushState;\n\t}\n\n\t/**\n\t * Push state\n\t *\n\t * @Param {Object} env\n\t * @Param {String} title\n\t * @Param {String} url\n\t */\n\tthis.push = function(env, title, url)\n\t{\n\t\tif (!support()) return;\n\t\tif (!url) return;\n\n\t\t// change title\n\t\tif (title)\n\t\t{\n\t\t\t$title.text(title);\n\t\t}\n\n\t\thistory.pushState(\n\t\t\tenv || null,\n\t\t\ttitle || url,\n\t\t\turl\n\t\t);\n\t};\n\n\t/**\n\t * Replace state\n\t *\n\t * @Param {Object} env\n\t * @Param {String} title\n\t * @Param {String} url\n\t */\n\tthis.replace = function(env, title, url)\n\t{\n\t\tif (!support()) return;\n\t\tif (!url) return;\n\n\t\t// change title\n\t\tif (title)\n\t\t{\n\t\t\t$title.text(title);\n\t\t}\n\n\t\thistory.replaceState(\n\t\t\tenv || null,\n\t\t\ttitle || url,\n\t\t\turl\n\t\t);\n\t};\n\n\t/**\n\t * initial history pop event\n\t */\n\tthis.initPopEvent = function()\n\t{\n\t\tfunction onPopState(e)\n\t\t{\n\t\t\tconsole.log('on pop state');\n\t\t}\n\n\t\twindow.addEventListener('popstate', onPopState);\n\t}\n}","\n/**\n * Get window size\n *\n * @return {Object}\n */\nexport function getWindowSize()\n{\n\treturn {\n\t\twidth: window.innerWidth,\n\t\theight: window.innerHeight\n\t};\n}\n\n\n/**\n * is touch device\n *\n * @return {Boolean}\n */\nexport function isTouchDevice()\n{\n\treturn 'ontouchstart' in window || navigator.maxTouchPoints;\n}\n\n\n/**\n * sleep\n *\n * @param {Number} delay\n * @return {Promise}\n */\nexport function sleep(delay)\n{\n\treturn new Promise(function(resolve) {\n\t\tsetTimeout(resolve, delay);\n\t});\n}\n\n\n/**\n * printf\n *\n * @param {String} str\n * @param {String} values\n */\nexport function printf(str, ...values)\n{\n\tfor (let i = 0; i < values.length; i++)\n\t{\n\t\tlet pattern = `\\\\{${i}\\\\}`;\n\t\tlet replace = new RegExp(pattern, 'g');\n\t\tstr = str.replace(replace, values[i]);\n\t}\n\treturn str;\n}","\n// set size\nexport const SIZE_MOBILE = 640;\nexport const SIZE_TABLET = 768;\nexport const SIZE_ARTICLE = 900;\n\n\n","import $ from 'jQuery';\nimport * as util from './util';\nimport * as preference from './preference';\n\n\n/**\n * Header\n */\nexport default function Header()\n{\n\tconst self = this;\n\tthis.$header = $('.layout-header');\n\tthis.$gnb = this.$header.find('.gnb');\n\n\t/**\n\t * Toggle gnb from mobile\n\t */\n\tfunction toggleGnbFromMobile()\n\t{\n\t\tself.$header.find('.toggle-gnb').on('click', function() {\n\t\t\t$(this).toggleClass('toggle-gnb-active');\n\t\t\tself.$gnb.toggleClass('gnb-active');\n\t\t});\n\t}\n\n\t/**\n\t * gnb event for touch\n\t * 터치 디바이스이며 모바일보다 큰 사이즈라면 터치 작동에 대한 대응\n\t *\n\t */\n\tfunction gnbEventForTouch()\n\t{\n\t\tif (util.isTouchDevice() && preference.SIZE_MOBILE < util.getWindowSize().width)\n\t\t{\n\t\t\tself.$gnb.find('.gnb__dep-1 > li > a').on('click', false);\n\t\t}\n\t}\n\n\n\tthis.init = function()\n\t{\n\t\tgnbEventForTouch();\n\t\ttoggleGnbFromMobile();\n\t}\n\n}","import $ from 'jQuery';\nimport Masonry from 'Masonry';\n\nimport * as util from './util';\n\n\nconst SCROLL_OFFSET = 30; // 페이지가 변화되는 스크롤 y축 위치 offset\nconst SCROLL_SPEED = 300; // 페이지 추가될때 스크롤 이동되는 속도\nconst BLOCK_DELAY = 80; // 아이템들이 추가될때 fade in 딜레이 간격\nconst LOAD_PAGE_PER_SIZE = 20; // 페이지 추가될때마다 불러올 아이템의 갯수\n\n\nexport default function Index(parent)\n{\n\tconst self = this;\n\n\t/**\n\t * PUBLIC VARIABLES\n\t */\n\n\tthis.srls = {};\n\tthis.options = {};\n\tthis.scrollTimer = null;\n\tthis.selector_articles = '#articles';\n\tthis.$index = $('.index');\n\tthis.$articles = this.$index.find('.index__articles');\n\tthis.$category = this.$index.find('.index__categories');\n\tthis.$more = this.$index.find('.index__loadMore');\n\tthis.masonry = null;\n\n\t/**\n\t * FUNCTIONS\n\t */\n\n\t/**\n\t * masonry\n\t * `masonry` 객체를 만들거나 제거한다.\n\t *\n\t * @param {Boolean} sw\n\t */\n\tfunction masonry(sw=true)\n\t{\n\t\tif(sw)\n\t\t{\n\t\t\tself.$articles.addClass('masonry');\n\t\t\tself.masonry = new Masonry(self.selector_articles, {\n\t\t\t\titemSelector: '.grid-item',\n\t\t\t\tcolumnWidth: '.grid-sizer',\n\t\t\t\ttransitionDuration : '0s',\n\t\t\t\thiddenStyle : {},\n\t\t\t\tvisibleStyle : {}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\tself.$articles.removeClass('masonry');\n\t\t\tself.masonry.destroy();\n\t\t\tself.masonry = null;\n\t\t}\n\t}\n\n\t/**\n\t * more articles\n\t * 아이템을 더 불러왔을때..\n\t *\n\t * @param {Number} page\n\t * @return {Promise}\n\t */\n\tasync function moreArticles(page)\n\t{\n\t\tlet response = null;\n\n\t\t// turn on loading\n\t\tmoreButton(false);\n\n\t\t// get articles\n\t\ttry\n\t\t{\n\t\t\tresponse = await $.ajax({\n\t\t\t\turl: `${parent.options.root}/ajax/`,\n\t\t\t\ttype: 'post',\n\t\t\t\tdata: {\n\t\t\t\t\tpage,\n\t\t\t\t\tsize: self.options.size,\n\t\t\t\t\tfield: 'srl,title,category_srl,json',\n\t\t\t\t},\n\t\t\t\tdataType: 'json',\n\t\t\t});\n\t\t}\n\t\tcatch(e)\n\t\t{\n\t\t\talert('Server error');\n\t\t\tconsole.error(e);\n\t\t\tmoreButton(true);\n\t\t\treturn false;\n\t\t}\n\n\t\t// update index\n\t\tupdateIndex(response, true, true);\n\n\t\t// update more button\n\t\tself.$more.children('a').attr('data-next', response.nextpage);\n\n\t\t// refresh masonry layout\n\t\tif (self.masonry)\n\t\t{\n\t\t\tself.masonry.layout();\n\t\t}\n\n\t\t// turn off loading\n\t\tmoreButton(true);\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * update index\n\t *\n\t * @param {Object} res\n\t * @param {Boolean} showAnimation\n\t * @param {Boolean} useScroll\n\t */\n\tfunction updateIndex(res, showAnimation=false, useScroll=false)\n\t{\n\t\tif (!res.nextpage)\n\t\t{\n\t\t\tself.$more.remove();\n\t\t}\n\n\t\t// check articles\n\t\tif (!(res.articles && res.articles.length)) return;\n\n\t\t// make article template\n\t\tlet appendElements = res.articles.map((item, key) => {\n\t\t\tlet url = `${parent.options.root}/article/${self.options.nest || ''}${item.srl}`;\n\t\t\tlet image = `${parent.options.gooseRoot}/${item.json.thumbnail.url}`;\n\t\t\tlet className = `grid-item grid-item__hidden ${item.size_className}`;\n\t\t\treturn `<div class=\"${className}\">` +\n\t\t\t\t`<a href=\"${url}\" data-srl=\"${item.srl}\" title=\"${item.title}\">` +\n\t\t\t\t`<figure style=\"background-image: url('${image}')\">` +\n\t\t\t\t`${item.title}` +\n\t\t\t\t`</figure>` +\n\t\t\t\t`</a>` +\n\t\t\t\t`</div>`;\n\t\t}).join('');\n\n\t\t// append articles\n\t\tlet $appendElements = $(appendElements);\n\n\t\t// set event articles\n\t\tinitItemsEvent($appendElements.children('a'));\n\n\t\t// append articles\n\t\tself.$articles.append($appendElements);\n\n\t\t// append articles using masonry\n\t\tif (self.masonry)\n\t\t{\n\t\t\tself.masonry.appended($appendElements);\n\t\t}\n\n\t\t// play animation blocks\n\t\tif (showAnimation)\n\t\t{\n\t\t\tanimationBlocks($appendElements);\n\t\t}\n\n\t\t// move to next page by scroll\n\t\tif (useScroll)\n\t\t{\n\t\t\tlet $firstElement = $appendElements.eq(0);\n\t\t\tlet top = $firstElement.offset().top - SCROLL_OFFSET;\n\t\t\t$firstElement.attr('data-page', res.currentPage);\n\t\t\t$(\"html, body\").stop().animate({ scrollTop: top }, SCROLL_SPEED, 'swing');\n\t\t}\n\t}\n\n\t/**\n\t * show animation block\n\t *\n\t * @param {Object} $blocks\n\t */\n\tfunction animationBlocks($blocks)\n\t{\n\t\t$blocks.each(function(key) {\n\t\t\tsetTimeout(() => {\n\t\t\t\t$(this).removeClass('grid-item__hidden');\n\t\t\t}, BLOCK_DELAY * key);\n\t\t});\n\t}\n\n\t/**\n\t * control more button\n\t * 더 불러오기 버튼의 상태가 변한다.\n\t *\n\t * @param {Boolean} sw\n\t */\n\tfunction moreButton(sw)\n\t{\n\t\t// more load articles\n\t\tfunction loadMoreTrigger()\n\t\t{\n\t\t\tmoreArticles(this.dataset.next).then();\n\t\t\treturn false;\n\t\t}\n\n\t\tif (sw)\n\t\t{\n\t\t\tself.$more.children('a').on('click', loadMoreTrigger);\n\t\t\tself.$more.removeClass('loadMore-loading');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tself.$more.children('a').off('click');\n\t\t\tself.$more.addClass('loadMore-loading');\n\t\t}\n\t}\n\n\t/**\n\t * toggle category\n\t */\n\tfunction toggleCategory()\n\t{\n\t\t$(this).toggleClass('categories__toggle-active');\n\t\t$(this).next().toggleClass('categories__index-active');\n\t}\n\n\t/**\n\t * scroll event\n\t *\n\t * @param {Boolean} sw\n\t */\n\tfunction scrollEvent(sw)\n\t{\n\t\tconst delay = 100;\n\n\t\tfunction action()\n\t\t{\n\t\t\tconst $el = self.$articles.children('[data-page]');\n\t\t\tconst top = $(this).scrollTop();\n\t\t\tlet $current = null;\n\n\t\t\tif (!$el.length) return false;\n\n\t\t\tif (top + $(this).height() === $(document).height())\n\t\t\t{\n\t\t\t\t$current = ($el.eq($el.length - 1)) ? $el.eq($el.length - 1) : null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$el.each(function(key) {\n\t\t\t\t\tif (top >= ($(this).offset().top - (SCROLL_OFFSET + 5)))\n\t\t\t\t\t{\n\t\t\t\t\t\t$current = $(this);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// update page\n\t\t\tlet page = ($current && $current.length) ? $current.data('page') : 1;\n\t\t\tupdatePage(page);\n\t\t}\n\n\t\tif (sw)\n\t\t{\n\t\t\t$(window).off('scroll.redgoose');\n\t\t\t$(window).on('scroll.redgoose', function() {\n\t\t\t\t// 너무많은 스크롤 이벤트가 트리깅 하는것을 방지하기 위하여 셋 타임아웃을 걸어놓았다.\n\t\t\t\tclearTimeout(self.scrollTimer);\n\t\t\t\tself.scrollTimer = setTimeout(action, delay);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$(window).off('scroll.redgoose');\n\t\t}\n\t}\n\n\t/**\n\t * update page\n\t * 변경된 페이지 번호로 url 업데이트 한다.\n\t *\n\t * @param {Number} page\n\t */\n\tfunction updatePage(page)\n\t{\n\t\tif (!URL) return;\n\n\t\tlet url = new URL(window.location.href);\n\t\tlet urlParams = url.searchParams;\n\t\tlet urlPage = url.searchParams.get('page');\n\t\turlPage = urlPage ? parseInt(urlPage) : 1;\n\n\t\tif (page === urlPage) return;\n\n\t\tif (page === 1)\n\t\t{\n\t\t\turlParams.delete('page');\n\t\t}\n\t\telse\n\t\t{\n\t\t\turlParams.set('page', page);\n\t\t}\n\n\t\tlet newUrl = location.pathname + (urlParams.toString() ? `?${urlParams.toString()}` : '');\n\n\t\t// update url\n\t\tconsole.log('wwwww', newUrl);\n\t\tparent.history.replace({ url: newUrl, type: 'index' }, null, newUrl);\n\t}\n\n\t/**\n\t * init items event\n\t *\n\t * @param {Object} $items\n\t */\n\tfunction initItemsEvent($items)\n\t{\n\t\tfunction onClickArticle(e)\n\t\t{\n\t\t\tlet srl = $(this).data('srl');\n\t\t\tif (!!srl)\n\t\t\t{\n\t\t\t\tparent.article.open(srl).then(onArticleOpen);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\n\t\tfunction onArticleOpen()\n\t\t{\n\t\t\tself.destroyIndexEvent();\n\t\t}\n\n\t\t$items.on('click', onClickArticle);\n\t}\n\n\n\t/**\n\t * METHODS\n\t */\n\n\t/**\n\t * init\n\t *\n\t * @param {Object} options\n\t */\n\tthis.init = function(options={})\n\t{\n\t\tif (!this.$articles.length) return false;\n\n\t\t// set srls\n\t\tthis.srls.nest = options.nest_srl;\n\t\tthis.srls.category = options.category_srl;\n\n\t\t// set options\n\t\tthis.options.size = options.size || LOAD_PAGE_PER_SIZE;\n\n\t\t// set toggle category for mobile\n\t\tthis.$category.children('.categories__toggle').on('click', toggleCategory);\n\n\t\t// initial select item event\n\t\tinitItemsEvent(this.$articles.find('.grid-item > a'));\n\n\t\t// initial history pop state event\n\t\tparent.history.initPopEvent();\n\n\t\t// set masonry\n\t\tmasonry();\n\n\t\t// 페이지 이동 안되도록 주소변경\n\t\tself.$more.children('a').attr('href', 'javascript:;');\n\n\t\t// set more articles event\n\t\tmoreButton(true);\n\n\t\t// set change page sensor\n\t\tscrollEvent(true);\n\t};\n\n\t/**\n\t * push page\n\t * 특정 페이지 데이터를\n\t *\n\t * @param {Number} page\n\t */\n\tthis.pushPage = function(page)\n\t{\n\t\tmoreArticles(page).then();\n\t};\n\n\t/**\n\t * destroy index event\n\t * 목록에 관련된 이벤트를 모두 끈다.\n\t */\n\tthis.destroyIndexEvent = function()\n\t{\n\t\tif (this.masonry)\n\t\t{\n\t\t\tmasonry(false);\n\t\t}\n\t\tscrollEvent(false);\n\t};\n\n\t/**\n\t * restore index event\n\t * 목록에 관련된 이벤트를 모두 다시켠다.\n\t */\n\tthis.restoreIndexEvent = function()\n\t{\n\t\tif (!this.masonry)\n\t\t{\n\t\t\tmasonry(true);\n\t\t}\n\t\tscrollEvent(true);\n\t};\n\n\t/**\n\t * use masonry\n\t * masonry 사용할지 안할지에 대한 공개 메서드\n\t *\n\t * @param {Boolean} sw\n\t */\n\tthis.useMasonry = function(sw)\n\t{\n\t\tmasonry(sw);\n\t}\n\n}","import $ from 'jQuery';\nimport AppHistory from './AppHistory';\n\nimport * as util from './util';\n\n\nexport default function Article(parent)\n{\n\tconst self = this;\n\tconst $html = $('html');\n\n\t/**\n\t * PUBLIC VARIABLES\n\t */\n\tthis.backupIndexScrollTop = 0;\n\n\n\t/**\n\t * FUNCTIONS\n\t */\n\n\t/**\n\t * open\n\t *\n\t * @param {Number} srl\n\t * @return {Promise}\n\t */\n\tasync function open(srl)\n\t{\n\t\tconst url = `${parent.options.root}/article/${srl}/`;\n\n\t\t// load article page\n\t\tparent.$popup.load(`${url}?mode=popup`, (el) => {\n\t\t\tlet $el = $(el);\n\t\t\tlet title = $el.find('.article__header > h1').text();\n\t\t\ttitle = !!title ? `${parent.options.title} / ${title}` : parent.options.title;\n\n\t\t\t// push history\n\t\t\tconsole.log(url);\n\t\t\tparent.history.push({ url: url, type: 'article' }, title, url);\n\t\t});\n\n\t\t// save scroll position\n\t\tself.backupIndexScrollTop = $html.scrollTop();\n\n\t\t// interaction\n\t\tparent.$popup.addClass('popupArticle-ready');\n\t\tawait util.sleep(10);\n\t\tparent.$popup.addClass('popupArticle-show');\n\t\tawait util.sleep(300);\n\t\tparent.$popup.removeClass('popupArticle-ready');\n\t\twindow.scrollTo(0, 0);\n\t\tparent.$app.addClass('disabled');\n\t}\n\n\t/**\n\t * close\n\t *\n\t * @return {Promise}\n\t */\n\tasync function close()\n\t{\n\t\tconsole.log('close article')\n\t}\n\n\n\t/**\n\t * METHODS\n\t */\n\n\t/**\n\t * open article\n\t *\n\t * @param {Number} srl\n\t */\n\tthis.open = async function(srl)\n\t{\n\t\tawait open(srl);\n\t};\n\n\t/**\n\t * close article\n\t *\n\t */\n\tthis.close = async function()\n\t{\n\t\tclose().then();\n\t};\n\n\tthis.go = function(srl)\n\t{\n\n\t};\n\n}","\n// default options\nexport const defaultOptions = {\n\troot: '',\n\tgooseRoot: '',\n\tdebug: false,\n};\n\n\n/**\n * init google analytics\n *\n * @param {Boolean} sw\n */\nexport function initGoogleAnalytics(sw)\n{\n\tif (!sw) return null;\n\n\t// Google Analytics\n\t(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n\t\t(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\t\tm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\tga('create', 'UA-42563094-1', 'redgoose.me');\n\tga('send', 'pageview');\n}\n","import $ from 'jQuery';\nimport AppHistory from './AppHistory';\nimport Header from './Header';\nimport Index from './Index';\nimport Article from './Article';\nimport * as etc from './etc';\n\n\n/**\n * Redgoose\n *\n * @param {Object} options\n */\nfunction Redgoose(options)\n{\n\tthis.$app = $('main');\n\tthis.popup = 'popupArticle';\n\tthis.$popup = $(`#${this.popup}`);\n\n\t// assign options\n\tthis.options = Object.assign({}, etc.defaultOptions, options);\n\n\t// init history\n\tthis.history = new AppHistory(this);\n\n\t// init header\n\tthis.header = new Header(this);\n\n\t// init index\n\tthis.index = new Index(this);\n\n\t// init article\n\tthis.article = new Article(this);\n\n\t// init google analytics\n\tetc.initGoogleAnalytics(false);\n\n}\n\n\nexport default Redgoose;"],"names":["AppHistory","$title","$","support","history","pushState","push","env","title","url","text","replace","replaceState","initPopEvent","onPopState","e","log","addEventListener","getWindowSize","window","innerWidth","innerHeight","isTouchDevice","navigator","maxTouchPoints","sleep","delay","Promise","resolve","SIZE_MOBILE","Header","self","$header","$gnb","find","toggleGnbFromMobile","on","toggleClass","gnbEventForTouch","util","preference","width","init","SCROLL_OFFSET","SCROLL_SPEED","BLOCK_DELAY","LOAD_PAGE_PER_SIZE","Index","parent","srls","options","scrollTimer","selector_articles","$index","$articles","$category","$more","masonry","sw","addClass","Masonry","removeClass","destroy","moreArticles","page","response","ajax","root","size","error","children","attr","nextpage","layout","updateIndex","res","showAnimation","useScroll","remove","articles","length","appendElements","map","item","key","nest","srl","image","gooseRoot","json","thumbnail","className","size_className","join","$appendElements","append","appended","$firstElement","eq","top","offset","currentPage","stop","animate","scrollTop","animationBlocks","$blocks","each","moreButton","loadMoreTrigger","dataset","next","then","off","toggleCategory","scrollEvent","action","$el","$current","height","document","data","setTimeout","updatePage","URL","location","href","urlParams","searchParams","urlPage","get","parseInt","delete","set","newUrl","pathname","toString","type","initItemsEvent","$items","onClickArticle","article","open","onArticleOpen","destroyIndexEvent","nest_srl","category","category_srl","pushPage","restoreIndexEvent","useMasonry","Article","$html","backupIndexScrollTop","$popup","load","el","scrollTo","$app","close","go","defaultOptions","initGoogleAnalytics","i","s","o","g","r","a","m","q","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","Redgoose","popup","Object","assign","etc","header","index"],"mappings":"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"}