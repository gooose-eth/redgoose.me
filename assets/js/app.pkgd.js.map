{"version":3,"sources":["Article.class.js","Index.class.js","View.class.js","layout.js"],"names":["Article","$btns","$","close","prev","next","like","$html","window","view","this","init","userData","addClass","on","location","href","urls","removeClass","off","e","keyCode","history","pushState","path","pathname","search","type","url","title","text","onLike","srl","$target","get","root","res","JSON","parse","state","count","parent","log","destroy","Index","self","$$","items","body","category","loading","article","itemSizeToClass","w","h","str","updateUrl","params","urlArray","split","decodeURI","replace","Object","page","parseInt","key","loadItems","func","ajax","dataType","timeout","error","request","status","success","req","markup","$newItems","sizeClass","i","length","width","height","more","img","not","children","closest","open","attr","filter","$more","loadItemsUrl","gotoTop","offset","top","find","focus","imagesLoaded","masonry","remove","append","masonryOptions","data","masonryLayoutComplete","paddingTop","animate","scrollTop","View","itemSelector","columnWidth","toggleClass","dom","index","bg","topNav","speed","active","directionButtons","$article","updateURL","sw","is_save_path","show","fadeIn","hide","load","go","fadeOut","empty","$viewItem","targetTop","is_skip_history","jQuery","document","documentElement","$lnb","flag","$li","setTimeout","hasClass","event","originalEvent","reload","trigger","$body","s","o","g","r","a","m","q","push","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","ga"],"mappings":"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","file":"app.pkgd.js","sourcesContent":["function Article()\n{\n\tvar self = this;\n\tvar $self = $('#Article');\n\tvar $body = $('body');\n\tvar $btns = {\n\t\tclose : $('button.closeView')\n\t\t,prev : $('button.prevView')\n\t\t,next : $('button.nextView')\n\t\t,like : $('button.likeArticle')\n\t};\n\tvar $html = $('html');\n\n\twindow.view = null;\n\n\tthis.init = function(userData)\n\t{\n\t\t// set class\n\t\t$html.addClass('mode-view');\n\t\t$('#topNav').addClass('on');\n\n\t\t// close button event\n\t\t$btns.close.on('click', function(){\n\t\t\twindow.location.href = userData.urls.close;\n\t\t\treturn false;\n\t\t});\n\n\t\t// prev button event\n\t\tif (userData.urls.prev)\n\t\t{\n\t\t\t$btns.prev\n\t\t\t\t.removeClass('disabled')\n\t\t\t\t.on('click', function(){\n\t\t\t\t\twindow.location.href = userData.urls.prev;\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$btns.prev.off('click');\n\t\t}\n\n\t\t// next button event\n\t\tif (userData.urls.next)\n\t\t{\n\t\t\t$btns.next\n\t\t\t\t.removeClass('disabled')\n\t\t\t\t.on('click', function(){\n\t\t\t\t\twindow.location.href = userData.urls.next;\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$btns.next.off('click');\n\t\t}\n\n\t\t// keyboard event\n\t\t$html.on('keyup.gooseView', function(e){\n\t\t\tswitch(e.keyCode)\n\t\t\t{\n\t\t\t\tcase 27:\n\t\t\t\t\t// esc\n\t\t\t\t\twindow.location.href = userData.urls.close;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37:\n\t\t\t\t\t// left\n\t\t\t\t\tif (userData.urls.prev)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.href = userData.urls.prev;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t// right\n\t\t\t\t\tif (userData.urls.next)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.href = userData.urls.next;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\t// update url\n\t\tif (history.pushState)\n\t\t{\n\t\t\tvar path = window.location.pathname + window.location.search;\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'index'\n\t\t\t\t,url : userData.urls.close\n\t\t\t}, userData.title, userData.urls.close);\n\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'article'\n\t\t\t\t,url : path\n\t\t\t}, $('title').text(), path);\n\t\t}\n\t};\n\n\t// update like\n\tthis.onLike = function(srl, $target)\n\t{\n\t\t$.get(this.root + '/updateLike/' + srl, function(res){\n\t\t\tres = JSON.parse(res);\n\t\t\tif (res.state == 'success')\n\t\t\t{\n\t\t\t\t$target.text(res.count);\n\t\t\t\t$target.parent().addClass('disabled');\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tlog(res);\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.destroy = function()\n\t{\n\n\t}\n}\n","function Index(userData)\n{\n\t// set variables\n\tvar self = this;\n\tvar $$ = {\n\t\titems : $('#items')\n\t\t,body : $('html, body')\n\t\t,category : $('#categoryList')\n\t\t,loading : null\n\t};\n\n\twindow.article = new Article();\n\tarticle.root = userData.root;\n\n\t// item size to class\n\tvar itemSizeToClass = function(w, h)\n\t{\n\t\tvar str = '';\n\t\tstr += (w == 470) ? ' wx2' : '';\n\t\tstr += (h == 470) ? ' hx2' : '';\n\t\treturn str;\n\t};\n\n\t// update url\n\tthis.updateUrl = function(url)\n\t{\n\t\tvar params = null;\n\t\tvar urlArray = url.split('?');\n\t\tvar str = '';\n\n\t\tif (urlArray[1])\n\t\t{\n\t\t\tparams = JSON.parse('{\"' + decodeURI(urlArray[1]).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparams = new Object();\n\t\t}\n\n\t\tparams.page = (params.page) ? parseInt(params.page) + 1 : 2;\n\n\t\tfor (var key in params)\n\t\t{\n\t\t\tif (str != \"\")\n\t\t\t{\n\t\t\t\tstr += \"&\";\n\t\t\t}\n\t\t\tstr += key + \"=\" + params[key];\n\t\t}\n\t\tparams = str;\n\n\t\treturn urlArray[0] + '?' + params;\n\t};\n\n\t// load items\n\tthis.loadItems = function(url, func)\n\t{\n\t\t$.ajax({\n\t\t\ttype : 'get'\n\t\t\t,url : url\n\t\t\t,dataType : 'json'\n\t\t\t,timeout : 3000\n\t\t\t,error : function(request, status, error)\n\t\t\t{\n\t\t\t\tlog('error message');\n\t\t\t\tlog(error);\n\t\t\t}\n\t\t\t,success : function(res, status, req)\n\t\t\t{\n\t\t\t\tvar markup = '';\n\t\t\t\tvar $newItems = null;\n\t\t\t\tvar sizeClass = null;\n\t\t\t\tfor (var i=0; i<res.length; i++)\n\t\t\t\t{\n\t\t\t\t\tsizeClass = itemSizeToClass(res[i].width, res[i].height);\n\t\t\t\t\tif (res[i].more)\n\t\t\t\t\t{\n\t\t\t\t\t\tmarkup += '<a href=\"#\" class=\"item more\" title=\"more item\"><span><em><i>More item</i></em></span></a>';\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmarkup += '<div class=\"item' + sizeClass + '\"><a href=\"' + res[i].url + '\"><img src=\"' + res[i].img + '\" alt=\"' + res[i].title + '\" /></a></div>';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$newItems = $(markup);\n\n\t\t\t\t// click item\n\t\t\t\t$newItems.not('div.more').children('a').on('click', function(e){\n\t\t\t\t\tif (window.history.pushState)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.history.pushState({\n\t\t\t\t\t\t\ttype : 'index'\n\t\t\t\t\t\t\t,url : window.location.pathname + window.location.search\n\t\t\t\t\t\t}, userData.title, window.location.pathname + window.location.search);\n\t\t\t\t\t}\n\t\t\t\t\t$(this).closest('div.item').addClass('view');\n\t\t\t\t\tview.open($(this).attr('href'), true);\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\n\t\t\t\t// more event\n\t\t\t\t$newItems.filter('.more').on('click', function(e){\n\t\t\t\t\tvar $more = $(this);\n\t\t\t\t\tuserData.loadItemsUrl = self.updateUrl(userData.loadItemsUrl);\n\n\t\t\t\t\tvar url = self.updateUrl(window.location.pathname + location.search);\n\t\t\t\t\tif (window.history.pushState)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.history.pushState({}, userData.title, url);\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.gotoTop = $more.offset().top;\n\n\t\t\t\t\t$more.off('click');\n\t\t\t\t\t$more.addClass('loading');\n\t\t\t\t\t$$.loading = $more;\n\n\t\t\t\t\tself.loadItems(userData.loadItemsUrl, function(){\n\t\t\t\t\t\t$more.next().find('a').focus();\n\t\t\t\t\t});\n\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\n\t\t\t\t$newItems.imagesLoaded(function(){\n\t\t\t\t\tif ($$.loading)\n\t\t\t\t\t{\n\t\t\t\t\t\tmasonry.remove($$.loading);\n\t\t\t\t\t\t$$.loading = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (masonry)\n\t\t\t\t\t{\n\t\t\t\t\t\t$$.items.masonry()\n\t\t\t\t\t\t\t.append($newItems)\n\t\t\t\t\t\t\t.masonry('appended', $newItems)\n\t\t\t\t\t\t\t.masonry('layout')\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$$.items\n\t\t\t\t\t\t\t.append($newItems)\n\t\t\t\t\t\t\t.masonry(masonryOptions)\n\t\t\t\t\t\t;\n\t\t\t\t\t\tmasonry = $$.items.data('masonry');\n\t\t\t\t\t\tmasonry.on('layoutComplete', window.masonryLayoutComplete);\n\t\t\t\t\t}\n\t\t\t\t\tif (func)\n\t\t\t\t\t{\n\t\t\t\t\t\tfunc();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\n\t/* E V E N T S */\n\t// layout complete\n\twindow.masonryLayoutComplete = function()\n\t{\n\t\tif (window.gotoTop)\n\t\t{\n\t\t\twindow.gotoTop = window.gotoTop - userData.paddingTop;\n\t\t\t$$.body.animate({scrollTop:window.gotoTop}, 400, 'swing');\n\t\t\twindow.gotoTop = null;\n\t\t}\n\t};\n\n\n\t/* A C T I O N */\n\n\t$('body').append('<div id=\"View_bg\"></div><section id=\"View\"></section>');\n\n\twindow.view = new View(userData);\n\n\t// set masonry options\n\twindow.masonryOptions = {\n\t\titemSelector: '.item'\n\t\t,columnWidth: '.grid-sizer'\n\t\t//,isAnimated: true\n\t\t//,transitionDuration : '.3s'\n\t};\n\twindow.masonry = null;\n\n\t// toggle category list\n\t$('#toggleCategory').on('click', function(){\n\t\t$(this).toggleClass('on');\n\t\t$$.category.children('ul').toggleClass('on');\n\t});\n\n\t// load items\n\tthis.loadItems(userData.loadItemsUrl);\n\n\tif (window.history.pushState)\n\t{\n\t\tvar path = window.location.pathname + window.location.search;\n\t\twindow.history.pushState({type:'index'}, userData.title, path);\n\t}\n}","var View = function(userData) {\n\n\t// private variables\n\tvar self = this;\n\tvar dom = {\n\t\tindex : $('#Index')\n\t\t,items : $('#items')\n\t\t,view : $('#View')\n\t\t,bg : $('#View_bg')\n\t\t,title : $('head > title')\n\t\t,topNav : $('#topNav')\n\t\t,body : $('html, body')\n\t};\n\tvar speed = 300;\n\tvar $html = $('html');\n\n\t// public variables\n\tthis.active = false;\n\tthis.path = null;\n\n\n\t/*----------------------------------------*\\\n\t * PRIVATE METHOD\n\t\\*----------------------------------------*/\n\n\t/**\n\t * init\n\t */\n\tvar init = function() {}\n\n\n\t/**\n\t * manage direction buttons\n\t * \n\t * @Param {DOM} $article\n\t * @Return void\n\t */\n\tvar directionButtons = function($article)\n\t{\n\t\tif ($article.attr('data-prev'))\n\t\t{\n\t\t\t$('button.prevView').removeClass('disabled');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('button.prevView').addClass('disabled');\n\t\t}\n\t\tif ($article.attr('data-next'))\n\t\t{\n\t\t\t$('button.nextView').removeClass('disabled');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('button.nextView').addClass('disabled');\n\t\t}\n\t};\n\n\t/**\n\t * update url\n\t * \n\t * @Param {Boolean} sw : write history\n\t * @Param {String} title\n\t * @Param {String} url\n\t * @Param {Boolean} is_save_path\n\t * @Return void\n\t */\n\tvar updateURL = function(sw, title, url, is_save_path)\n\t{\n\t\tif (is_save_path)\n\t\t{\n\t\t\tself.path = window.location.pathname + window.location.search;\n\t\t}\n\t\tif (sw && window.history.pushState)\n\t\t{\n\t\t\tdom.title.text(title);\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'article'\n\t\t\t\t,url : url\n\t\t\t}, title, url);\n\t\t}\n\t};\n\n\n\t/*----------------------------------------*\\\n\t * PUBLIC METHOD\n\t\\*----------------------------------------*/\n\t\n\t/**\n\t * open view\n\t * \n\t * @Param {String} url\n\t * @Param {Boolean} sw : write history\n\t * @Return void\n\t */\n\tthis.open = function(url, sw)\n\t{\n\t\tself.active = true;\n\t\t$html.removeClass('scroll');\n\t\tdom.view.show();\n\t\tdom.bg.fadeIn(speed, function(){\n\t\t\tif (masonry)\n\t\t\t{\n\t\t\t\tmasonry.destroy();\n\t\t\t\tmasonry = null;\n\t\t\t}\n\t\t\tdom.index.hide();\n\t\t\tdom.view.load(url + ' #Article', function(){\n\t\t\t\t$('html').addClass('mode-view');\n\t\t\t\t$('#topNav').addClass('on');\n\n\t\t\t\tupdateURL(sw, $(this).children().attr('data-title'), url, true);\n\t\t\t\tdirectionButtons($(this).children());\n\t\t\t});\n\t\t});\n\n\t\t// keyboard event\n\t\t$html.on('keyup.gooseView', function(e){\n\t\t\tvar $article = dom.view.children();\n\t\t\tswitch(e.keyCode)\n\t\t\t{\n\t\t\t\tcase 27:\n\t\t\t\t\t// esc\n\t\t\t\t\tself.close(true);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37:\n\t\t\t\t\t// left\n\t\t\t\t\tif ($article.attr('data-prev'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.go($article.attr('data-prev'), true);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t// right\n\t\t\t\t\tif ($article.attr('data-next'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.go($article.attr('data-next'), true);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * close view\n\t * \n\t * @Param {Boolean} sw\n\t * @Return void\n\t */\n\tthis.close = function(sw)\n\t{\n\t\tself.active = false;\n\t\t$('button.closeView').off('click');\n\t\t$('html').off('keyup.gooseView').addClass('scroll');\n\t\t$('#topNav').removeClass('on');\n\t\tdom.index.show();\n\t\tdom.items.masonry(masonryOptions);\n\t\twindow.masonry = dom.items.data('masonry');\n\t\tmasonry.on('layoutComplete', window.masonryLayoutComplete);\n\t\tdom.bg.fadeOut(speed);\n\t\tdom.view.fadeOut(speed, function(){\n\t\t\t$('html').removeClass('mode-view');\n\t\t\t$(this).empty();\n\t\t\tvar $viewItem = dom.items.children('div.view');\n\t\t\tvar targetTop = $viewItem.offset().top - userData.paddingTop;\n\t\t\tif (targetTop > 220)\n\t\t\t{\n\t\t\t\tdom.body.scrollTop(targetTop);\n\t\t\t}\n\t\t\t$viewItem.removeClass('view');\n\t\t});\n\t\tif (sw && window.history.pushState)\n\t\t{\n\t\t\tdom.title.text(userData.title);\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'index'\n\t\t\t\t,url : self.path\n\t\t\t}, userData.title, self.path);\n\t\t}\n\t\tself.path = null;\n\t};\n\n\t/**\n\t * go view\n\t * \n\t * @Param {String} url : url address\n\t * @Return void\n\t */\n\tthis.go = function(url, is_skip_history)\n\t{\n\t\tdom.view.load(url + ' #Article', function(){\n\t\t\tupdateURL(true, $(this).children().attr('data-title'), url, !is_skip_history);\n\t\t\tdirectionButtons($(this).children());\n\t\t});\n\t};\n\n\t// action\n\tinit();\n};","jQuery(function($){\n\n\t// check touch mode\n\tif ('ontouchstart' in document.documentElement)\n\t{\n\t\t$('html').addClass('touch');\n\t}\n\telse\n\t{\n\t\t$('html').addClass('no-touch');\n\t}\n\n\t// toggle local navigation\n\t$('#toggleNavigation').on('click', function(){\n\t\t$('#header > nav.lnb').toggleClass('on');\n\t});\n\n\t// navigation event for touch device\n\tvar $lnb = $('html.touch #header > nav.lnb');\n\tvar flag = false;\n\t$lnb.find('> ul.dep1 > li > a').on('touchend click', function(){\n\t\tvar $li = $(this).parent();\n\t\tif (!flag) {\n\t\t\tflag = true;\n\t\t\tsetTimeout(function(){ flag = false; }, 200);\n\t\t\t// ipad\n\t\t\tif ($(window).width() > 640)\n\t\t\t{\n\t\t\t\tif ($li.hasClass('on'))\n\t\t\t\t{\n\t\t\t\t\t$li.removeClass('on');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$li.parent().children().removeClass('on');\n\t\t\t\t\t$li.addClass('on');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t});\n\n\t// navigation focus event\n\t$('#header > nav.lnb > ul.dep1 > li')\n\t\t.on('focusin', function(){\n\t\t\t$(this).addClass('on');\n\t\t})\n\t\t.on('focusout', function(){\n\t\t\t$(this).removeClass('on');\n\t\t})\n\t;\n\n\t// change page event\n\t$(window).on(\"popstate\", function(event) {\n\t\tvar data = event.originalEvent.state;\n\t\tif (data)\n\t\t{\n\t\t\tswitch(data.type)\n\t\t\t{\n\t\t\t\t// go index\n\t\t\t\tcase 'index':\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (view.active)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview.close(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t// go article\n\t\t\t\tcase 'article':\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (view)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$('#items').find('a[href=\"' + data.url + '\"]').closest('div.item').addClass('view');\n\t\t\t\t\t\t\tview.open(data.url, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\n\t// navigation - active position\n\t$('#header li.active').closest('div').parent().addClass('active');\n\n\n\t// resize event\n\t$(window).on('resize', function(){\n\t\tif ($(window).width() < 640)\n\t\t{\n\t\t\t$('html').addClass('mini');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('html').removeClass('mini');\n\t\t}\n\t});\n\t$(window).trigger('resize');\n\n\n\t// 비동기로 article을 열었을때의 버튼 이벤트 초기화\n\tvar $body = $('body');\n\ttry {\n\t\t// close view button event\n\t\t$body.on('click', 'button.closeView', function(){\n\t\t\tview.close(true);\n\t\t});\n\n\t\t// like button evenr\n\t\t$body.on('click', 'button.likeArticle', function(){\n\t\t\tif (!$(this).hasClass('disabled'))\n\t\t\t{\n\t\t\t\tvar srl = parseInt($(this).attr('data-srl'));\n\t\t\t\tarticle.onLike(srl, $(this).children('em'));\n\t\t\t}\n\t\t});\n\t\n\t\t// prev view event\n\t\t$body.on('click', 'button.prevView', function(){\n\t\t\tif (!$(this).hasClass('disabled'))\n\t\t\t{\n\t\t\t\tview.go($('#Article').attr('data-prev'), true);\n\t\t\t}\n\t\t});\n\n\t\t// next view event\n\t\t$body.on('click', 'button.nextView', function(){\n\t\t\tif (!$(this).hasClass('disabled'))\n\t\t\t{\n\t\t\t\tview.go($('#Article').attr('data-next'), true);\n\t\t\t}\n\t\t});\n\t} catch(e) {}\n\n\t// Google Analytics\n\t(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n\t\t\t(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\t\tm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\n\tga('create', 'UA-42563094-1', 'redgoose.me');\n\tga('send', 'pageview');\n});"],"sourceRoot":"/source/"}