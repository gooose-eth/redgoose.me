{"version":3,"file":"redgoose.js","sources":["../src/js/util.js","../src/js/preference.js","../src/js/Header.js","../src/js/AppHistory.js","../src/js/Index.js","../src/js/Article.js","../src/js/etc.js","../src/js/redgoose.js"],"sourcesContent":["\n/**\n * Get window size\n *\n * @return {Object}\n */\nexport function getWindowSize()\n{\n\treturn {\n\t\twidth: window.innerWidth,\n\t\theight: window.innerHeight\n\t};\n}\n\n\n/**\n * is touch device\n *\n * @return {Boolean}\n */\nexport function isTouchDevice()\n{\n\treturn 'ontouchstart' in window || navigator.maxTouchPoints;\n}\n\n\n/**\n * sleep\n *\n * @param {Number} delay\n * @return {Promise}\n */\nexport function sleep(delay)\n{\n\treturn new Promise(function(resolve) {\n\t\tsetTimeout(resolve, delay);\n\t});\n}\n\n\n/**\n * printf\n *\n * @param {String} str\n * @param {String} values\n */\nexport function printf(str, ...values)\n{\n\tfor (let i = 0; i < values.length; i++)\n\t{\n\t\tlet pattern = `\\\\{${i}\\\\}`;\n\t\tlet replace = new RegExp(pattern, 'g');\n\t\tstr = str.replace(replace, values[i]);\n\t}\n\treturn str;\n}","\n// set size\nexport const SIZE_MOBILE = 640;\nexport const SIZE_TABLET = 768;\nexport const SIZE_ARTICLE = 900;\n\n\n","import $ from 'jQuery';\nimport * as util from './util';\nimport * as preference from './preference';\n\n\n/**\n * Header\n */\nexport default function Header()\n{\n\tconst self = this;\n\tthis.$header = $('.layout-header');\n\tthis.$gnb = this.$header.find('.gnb');\n\n\t/**\n\t * Toggle gnb from mobile\n\t */\n\tfunction toggleGnbFromMobile()\n\t{\n\t\tself.$header.find('.toggle-gnb').on('click', function() {\n\t\t\t$(this).toggleClass('toggle-gnb-active');\n\t\t\tself.$gnb.toggleClass('gnb-active');\n\t\t});\n\t}\n\n\t/**\n\t * gnb event for touch\n\t * 터치 디바이스이며 모바일보다 큰 사이즈라면 터치 작동에 대한 대응\n\t *\n\t */\n\tfunction gnbEventForTouch()\n\t{\n\t\tif (util.isTouchDevice() && preference.SIZE_MOBILE < util.getWindowSize().width)\n\t\t{\n\t\t\tself.$gnb.find('.gnb__dep-1 > li > a').on('click', false);\n\t\t}\n\t}\n\n\n\tthis.init = function()\n\t{\n\t\tgnbEventForTouch();\n\t\ttoggleGnbFromMobile();\n\t}\n\n}","\nexport default function AppHistory() {\n\n\t/**\n\t * check support\n\t *\n\t * @Return {Boolean}\n\t */\n\tfunction support()\n\t{\n\t\treturn !!history.pushState;\n\t}\n\n\t/**\n\t * Push state\n\t *\n\t * @Param {Object} env\n\t * @Param {String} title\n\t * @Param {String} url\n\t */\n\tthis.push = function(env, title, url)\n\t{\n\t\tif (!support()) return;\n\t\tif (!url) return;\n\n\t\thistory.pushState(\n\t\t\tenv || null,\n\t\t\ttitle || url,\n\t\t\turl\n\t\t);\n\t};\n\n\t/**\n\t * Replace state\n\t *\n\t * @Param {Object} env\n\t * @Param {String} title\n\t * @Param {String} url\n\t */\n\tthis.replace = function(env, title, url)\n\t{\n\t\tif (!support()) return;\n\t\tif (!url) return;\n\n\t\thistory.replaceState(\n\t\t\tenv || null,\n\t\t\ttitle || url,\n\t\t\turl\n\t\t);\n\t};\n\n\t/**\n\t * initial history pop event\n\t */\n\tthis.initPopEvent = function()\n\t{\n\t\tfunction onPopState(e)\n\t\t{\n\t\t\tconsole.log('on pop state');\n\t\t}\n\n\t\twindow.addEventListener('popstate', onPopState);\n\t}\n}","import $ from 'jQuery';\nimport Masonry from 'Masonry';\n\nimport * as util from './util';\nimport AppHistory from './AppHistory';\n\n\nconst SCROLL_OFFSET = 30; // 페이지가 변화되는 스크롤 y축 위치 offset\nconst SCROLL_SPEED = 300; // 페이지 추가될때 스크롤 이동되는 속도\nconst BLOCK_DELAY = 80; // 아이템들이 추가될때 fade in 딜레이 간격\nconst LOAD_PAGE_PER_SIZE = 20; // 페이지 추가될때마다 불러올 아이템의 갯수\nconst appHistory = new AppHistory();\n\n\nexport default function Index(parent)\n{\n\tconst self = this;\n\n\t/**\n\t * PUBLIC VARIABLES\n\t */\n\n\tthis.srls = {};\n\tthis.options = {};\n\tthis.scrollTimer = null;\n\tthis.selector_articles = '#articles';\n\tthis.$index = $('.index');\n\tthis.$articles = this.$index.find('.index__articles');\n\tthis.$category = this.$index.find('.index__categories');\n\tthis.$more = this.$index.find('.index__loadMore');\n\tthis.masonry = null;\n\n\t/**\n\t * FUNCTIONS\n\t */\n\n\t/**\n\t * masonry\n\t * `masonry` 객체를 만들거나 제거한다.\n\t *\n\t * @param {Boolean} sw\n\t */\n\tfunction masonry(sw=true)\n\t{\n\t\tif(sw)\n\t\t{\n\t\t\tself.$articles.addClass('masonry');\n\t\t\tself.masonry = new Masonry(self.selector_articles, {\n\t\t\t\titemSelector: '.grid-item',\n\t\t\t\tcolumnWidth: '.grid-sizer',\n\t\t\t\ttransitionDuration : '0s',\n\t\t\t\thiddenStyle : {},\n\t\t\t\tvisibleStyle : {}\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t// TODO: destroy masonry\n\t\t}\n\t}\n\n\t/**\n\t * more articles\n\t * 아이템을 더 불러왔을때..\n\t *\n\t * @param {Number} page\n\t * @return {Promise}\n\t */\n\tasync function moreArticles(page)\n\t{\n\t\tlet response = null;\n\n\t\t// turn on loading\n\t\tmoreButton(false);\n\n\t\t// get articles\n\t\ttry\n\t\t{\n\t\t\tresponse = await $.ajax({\n\t\t\t\turl: `${parent.options.root}/ajax/`,\n\t\t\t\ttype: 'post',\n\t\t\t\tdata: {\n\t\t\t\t\tpage,\n\t\t\t\t\tsize: self.options.size,\n\t\t\t\t\tfield: 'srl,title,category_srl,json',\n\t\t\t\t},\n\t\t\t\tdataType: 'json',\n\t\t\t});\n\t\t}\n\t\tcatch(e)\n\t\t{\n\t\t\talert('Server error');\n\t\t\tconsole.error(e);\n\t\t\tmoreButton(true);\n\t\t\treturn false;\n\t\t}\n\n\t\t// update index\n\t\tupdateIndex(response, true, true);\n\n\t\t// update more button\n\t\tself.$more.children('a').attr('data-next', response.nextpage);\n\n\t\t// refresh masonry layout\n\t\tself.masonry.layout();\n\n\t\t// turn off loading\n\t\tmoreButton(true);\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * update index\n\t *\n\t * @param {Object} res\n\t * @param {Boolean} showAnimation\n\t * @param {Boolean} useScroll\n\t */\n\tfunction updateIndex(res, showAnimation=false, useScroll=false)\n\t{\n\t\tif (!res.nextpage)\n\t\t{\n\t\t\tself.$more.remove();\n\t\t}\n\n\t\t// check articles\n\t\tif (!(res.articles && res.articles.length)) return;\n\n\t\t// make article template\n\t\tlet appendElements = res.articles.map((item, key) => {\n\t\t\tlet url = `${parent.options.root}/article/${self.options.nest || ''}${item.srl}`;\n\t\t\tlet image = `${parent.options.gooseRoot}/${item.json.thumbnail.url}`;\n\t\t\tlet className = `grid-item grid-item__hidden ${item.size_className}`;\n\t\t\treturn `<div class=\"${className}\">` +\n\t\t\t\t`<a href=\"${url}\" data-srl=\"${item.srl}\" title=\"${item.title}\">` +\n\t\t\t\t`<figure style=\"background-image: url('${image}')\">` +\n\t\t\t\t`${item.title}` +\n\t\t\t\t`</figure>` +\n\t\t\t\t`</a>` +\n\t\t\t\t`</div>`;\n\t\t}).join('');\n\n\t\t// append articles\n\t\tlet $appendElements = $(appendElements);\n\n\t\t// set event articles\n\t\tinitItemsEvent($appendElements.children('a'));\n\n\t\t// append articles\n\t\tself.$articles.append($appendElements);\n\t\tself.masonry.appended($appendElements);\n\n\t\t// play animation blocks\n\t\tif (showAnimation)\n\t\t{\n\t\t\tanimationBlocks($appendElements);\n\t\t}\n\n\t\t// move to next page by scroll\n\t\tif (useScroll)\n\t\t{\n\t\t\tlet $firstElement = $appendElements.eq(0);\n\t\t\tlet top = $firstElement.offset().top - SCROLL_OFFSET;\n\t\t\t$firstElement.attr('data-page', res.currentPage);\n\t\t\t$(\"html, body\").stop().animate({ scrollTop: top }, SCROLL_SPEED, 'swing');\n\t\t}\n\t}\n\n\t/**\n\t * show animation block\n\t *\n\t * @param {Object} $blocks\n\t */\n\tfunction animationBlocks($blocks)\n\t{\n\t\t$blocks.each(function(key) {\n\t\t\tsetTimeout(() => {\n\t\t\t\t$(this).removeClass('grid-item__hidden');\n\t\t\t}, BLOCK_DELAY * key);\n\t\t});\n\t}\n\n\t/**\n\t * control more button\n\t * 더 불러오기 버튼의 상태가 변한다.\n\t *\n\t * @param {Boolean} sw\n\t */\n\tfunction moreButton(sw)\n\t{\n\t\t// more load articles\n\t\tfunction loadMoreTrigger()\n\t\t{\n\t\t\tmoreArticles(this.dataset.next).then();\n\t\t\treturn false;\n\t\t}\n\n\t\tif (sw)\n\t\t{\n\t\t\tself.$more.children('a').on('click', loadMoreTrigger);\n\t\t\tself.$more.removeClass('loadMore-loading');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tself.$more.children('a').off('click');\n\t\t\tself.$more.addClass('loadMore-loading');\n\t\t}\n\t}\n\n\t/**\n\t * toggle category\n\t */\n\tfunction toggleCategory()\n\t{\n\t\t$(this).toggleClass('categories__toggle-active');\n\t\t$(this).next().toggleClass('categories__index-active');\n\t}\n\n\t/**\n\t * scroll event\n\t *\n\t * @param {Boolean} sw\n\t */\n\tfunction scrollEvent(sw)\n\t{\n\t\tconst delay = 100;\n\n\t\tfunction action()\n\t\t{\n\t\t\tconst $el = self.$articles.children('[data-page]');\n\t\t\tconst top = $(this).scrollTop();\n\t\t\tlet $current = null;\n\n\t\t\tif (!$el.length) return false;\n\n\t\t\tif (top + $(this).height() === $(document).height())\n\t\t\t{\n\t\t\t\t$current = ($el.eq($el.length - 1)) ? $el.eq($el.length - 1) : null;\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\t$el.each(function(key) {\n\t\t\t\t\tif (top >= ($(this).offset().top - (SCROLL_OFFSET + 5)))\n\t\t\t\t\t{\n\t\t\t\t\t\t$current = $(this);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// update page\n\t\t\tlet page = ($current && $current.length) ? $current.data('page') : 1;\n\t\t\tupdatePage(page);\n\t\t}\n\n\t\tif (sw)\n\t\t{\n\t\t\t$(window).on('scroll', function() {\n\t\t\t\t// 너무많은 스크롤 이벤트가 트리깅 하는것을 방지하기 위하여 셋 타임아웃을 걸어놓았다.\n\t\t\t\tclearTimeout(self.scrollTimer);\n\t\t\t\tself.scrollTimer = setTimeout(action, delay);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$(window).off('scroll');\n\t\t}\n\t}\n\n\t/**\n\t * update page\n\t * 변경된 페이지 번호로 url 업데이트 한다.\n\t *\n\t * @param {Number} page\n\t */\n\tfunction updatePage(page)\n\t{\n\t\tif (!URL) return;\n\n\t\tlet url = new URL(window.location.href);\n\t\tlet urlParams = url.searchParams;\n\t\tlet urlPage = url.searchParams.get('page');\n\t\turlPage = urlPage ? parseInt(urlPage) : 1;\n\n\t\tif (page === urlPage) return;\n\n\t\tif (page === 1)\n\t\t{\n\t\t\turlParams.delete('page');\n\t\t}\n\t\telse\n\t\t{\n\t\t\turlParams.set('page', page);\n\t\t}\n\n\t\tlet newUrl = location.pathname + (urlParams.toString() ? `?${urlParams.toString()}` : '');\n\n\t\t// update url\n\t\tappHistory.replace({ url: newUrl, type: 'index' }, null, newUrl);\n\t}\n\n\t/**\n\t * init items event\n\t *\n\t * @param {Object} $items\n\t */\n\tfunction initItemsEvent($items)\n\t{\n\t\tfunction onClickArticle(e)\n\t\t{\n\t\t\tlet srl = $(this).data('srl');\n\t\t\tparent.article.open(srl, window.location.pathname + window.location.search);\n\t\t\treturn false;\n\t\t}\n\n\t\t$items.on('click', onClickArticle);\n\t}\n\n\t/**\n\t * METHODS\n\t */\n\n\t/**\n\t * init\n\t *\n\t * @param {Object} options\n\t */\n\tthis.init = function(options={})\n\t{\n\t\tif (!this.$articles.length) return false;\n\n\t\t// set srls\n\t\tthis.srls.nest = options.nest_srl;\n\t\tthis.srls.category = options.category_srl;\n\n\t\t// set options\n\t\tthis.options.size = options.size || LOAD_PAGE_PER_SIZE;\n\n\t\t// set toggle category for mobile\n\t\tthis.$category.children('.categories__toggle').on('click', toggleCategory);\n\n\t\t// initial select item event\n\t\tinitItemsEvent(this.$articles.find('.grid-item > a'));\n\n\t\t// initial history pop state event\n\t\tappHistory.initPopEvent();\n\n\t\t// set masonry\n\t\tmasonry();\n\n\t\t// 페이지 이동 안되도록 주소변경\n\t\tself.$more.children('a').attr('href', 'javascript:;');\n\n\t\t// set more articles event\n\t\tmoreButton(true);\n\n\t\t// set change page sensor\n\t\tscrollEvent(true);\n\t};\n\n\t/**\n\t * push page\n\t * 특정 페이지 데이터를\n\t *\n\t * @param {Number} page\n\t */\n\tthis.pushPage = function(page)\n\t{\n\t\tmoreArticles(page).then();\n\t};\n\n}","import $ from 'jQuery';\nimport AppHistory from './AppHistory';\n\nimport * as util from './util';\n\n\nexport default function Article(parent)\n{\n\tconst self = this;\n\n\t/**\n\t * PUBLIC VARIABLES\n\t */\n\n\tthis.popup = 'popupArticle';\n\tthis.$popup = $(`#${this.popup}`);\n\n\n\t/**\n\t * FUNCTIONS\n\t */\n\n\t/**\n\t * open\n\t *\n\t * @param {Number} srl\n\t * @param {String} url\n\t * @return {Promise}\n\t */\n\tasync function open(srl, url)\n\t{\n\t\tconsole.log('open article', srl, url);\n\t\tlet res = await getArticleData(srl);\n\t\tconsole.log('response', res);\n\t\t// TODO: ajax 콜해서 데이터 가져오기\n\t\t// TODO: 팝업 엘리먼트로 dom 집어넣기\n\t\t// TODO: 본문 article 표시하기 (애니메이션)\n\t\t// TODO: url 푸쉬\n\t}\n\n\t/**\n\t * close\n\t *\n\t * @return {Promise}\n\t */\n\tasync function close()\n\t{\n\t\tconsole.log('close article')\n\t}\n\n\t/**\n\t * get article data\n\t *\n\t * @param {Number} srl\n\t * @return {Promise}\n\t */\n\tasync function getArticleData(srl)\n\t{\n\t\ttry\n\t\t{\n\t\t\t// TODO: 여기서부터 작업\n\t\t\treturn await $.ajax({\n\t\t\t\turl: `${parent.options.root}/ajax/article/`,\n\t\t\t\ttype: 'post',\n\t\t\t\tdata: {\n\t\t\t\t\tarticle: srl,\n\t\t\t\t\tfield: '*',\n\t\t\t\t},\n\t\t\t\tdataType: 'json',\n\t\t\t});\n\t\t}\n\t\tcatch(e)\n\t\t{\n\t\t\talert('Server error');\n\t\t\tconsole.error(e);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\n\t/**\n\t * METHODS\n\t */\n\n\t/**\n\t * open article\n\t *\n\t * @param {Number} srl\n\t * @param {String} url\n\t */\n\tthis.open = function(srl, url)\n\t{\n\t\topen(srl, url).then();\n\t};\n\n\t/**\n\t * close article\n\t *\n\t */\n\tthis.close = function()\n\t{\n\t\tclose().then();\n\t}\n\n}","\n// default options\nexport const defaultOptions = {\n\troot: '',\n\tgooseRoot: '',\n\tdebug: false,\n};\n\n\n/**\n * init google analytics\n *\n * @param {Boolean} sw\n */\nexport function initGoogleAnalytics(sw)\n{\n\tif (!sw) return null;\n\n\t// Google Analytics\n\t(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n\t\t(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\t\tm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\tga('create', 'UA-42563094-1', 'redgoose.me');\n\tga('send', 'pageview');\n}\n","import Header from './Header';\nimport Index from './Index';\nimport Article from './Article';\nimport * as etc from './etc';\n\n\n/**\n * Redgoose\n *\n * @param {Object} options\n */\nfunction Redgoose(options)\n{\n\t// assign options\n\tthis.options = Object.assign({}, etc.defaultOptions, options);\n\n\t// init header\n\tthis.header = new Header(this);\n\n\t// init index\n\tthis.index = new Index(this);\n\n\t// init article\n\tthis.article = new Article(this);\n\n\t// init google analytics\n\tetc.initGoogleAnalytics(false);\n\n}\n\n\nexport default Redgoose;"],"names":["getWindowSize","window","innerWidth","innerHeight","isTouchDevice","navigator","maxTouchPoints","SIZE_MOBILE","Header","self","$header","$","$gnb","find","toggleGnbFromMobile","on","toggleClass","gnbEventForTouch","util","preference","width","init","AppHistory","support","history","pushState","push","env","title","url","replace","replaceState","initPopEvent","onPopState","e","log","addEventListener","SCROLL_OFFSET","SCROLL_SPEED","BLOCK_DELAY","LOAD_PAGE_PER_SIZE","appHistory","Index","parent","srls","options","scrollTimer","selector_articles","$index","$articles","$category","$more","masonry","sw","addClass","Masonry","moreArticles","page","response","ajax","root","size","error","children","attr","nextpage","layout","updateIndex","res","showAnimation","useScroll","remove","articles","length","appendElements","map","item","key","nest","srl","image","gooseRoot","json","thumbnail","className","size_className","join","$appendElements","append","appended","$firstElement","eq","top","offset","currentPage","stop","animate","scrollTop","animationBlocks","$blocks","each","removeClass","moreButton","loadMoreTrigger","dataset","next","then","off","toggleCategory","scrollEvent","delay","action","$el","$current","height","document","data","setTimeout","updatePage","URL","location","href","urlParams","searchParams","urlPage","get","parseInt","delete","set","newUrl","pathname","toString","type","initItemsEvent","$items","onClickArticle","article","open","search","nest_srl","category","category_srl","pushPage","Article","popup","$popup","getArticleData","close","defaultOptions","initGoogleAnalytics","i","s","o","g","r","a","m","q","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","Redgoose","Object","assign","etc","header","index"],"mappings":"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"}