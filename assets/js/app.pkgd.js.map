{"version":3,"sources":["Article.class.js","Index.class.js","View.class.js","layout.js"],"names":["Article","$self","$","$body","$btns","close","find","prev","next","like","$html","window","view","this","init","userData","addClass","on","log","location","href","urls","removeClass","off","e","keyCode","history","pushState","path","pathname","search","type","url","title","text","onLike","srl","$target","get","root","res","JSON","parse","state","count","parent","destroy","Index","self","$$","items","body","category","loading","article","itemSizeToClass","w","h","str","updateUrl","params","urlArray","split","decodeURI","replace","Object","page","parseInt","key","loadItems","func","ajax","dataType","timeout","error","request","status","success","req","markup","$newItems","sizeClass","i","length","width","height","more","img","not","children","closest","open","attr","filter","$more","loadItemsUrl","gotoTop","offset","top","focus","imagesLoaded","masonry","remove","append","masonryOptions","data","masonryLayoutComplete","paddingTop","animate","scrollTop","View","itemSelector","columnWidth","toggleClass","dom","index","bg","topNav","speed","active","directionButtons","$article","updateURL","sw","show","fadeIn","hide","load","go","fadeOut","empty","$viewItem","targetTop","jQuery","document","documentElement","$lnb","flag","$li","setTimeout","hasClass","event","originalEvent","reload","trigger","s","o","g","r","a","m","q","push","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","ga"],"mappings":"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","file":"app.pkgd.js","sourcesContent":["function Article()\n{\n\tvar self = this;\n\tvar $self = $('#Article');\n\tvar $body = $('body');\n\tvar $btns = {\n\t\tclose : $self.find('button.closeView')\n\t\t,prev : $self.find('button.prevView')\n\t\t,next : $self.find('button.nextView')\n\t\t,like : $self.find('button.likeArticle')\n\t};\n\tvar $html = $('html');\n\n\twindow.view = null;\n\n\tthis.init = function(userData)\n\t{\n\t\t// set class\n\t\t$html.addClass('mode-view');\n\t\t$('#topNav').addClass('on');\n\n\t\t// close button event\n\t\t$btns.close.on('click', function(){\n\t\t\tlog('for Article.class.js');\n\t\t\twindow.location.href = userData.urls.close;\n\t\t\treturn false;\n\t\t});\n\n\t\t// prev button event\n\t\tif (userData.urls.prev)\n\t\t{\n\t\t\t$btns.prev\n\t\t\t\t.removeClass('disabled')\n\t\t\t\t.on('click', function(){\n\t\t\t\t\twindow.location.href = userData.urls.prev;\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$btns.prev.off('click');\n\t\t}\n\n\t\t// next button event\n\t\tif (userData.urls.next)\n\t\t{\n\t\t\t$btns.next\n\t\t\t\t.removeClass('disabled')\n\t\t\t\t.on('click', function(){\n\t\t\t\t\twindow.location.href = userData.urls.next;\n\t\t\t\t\treturn false;\n\t\t\t\t})\n\t\t\t;\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$btns.next.off('click');\n\t\t}\n\n\t\t// keyboard event\n\t\t$html.on('keyup.gooseView', function(e){\n\t\t\tswitch(e.keyCode)\n\t\t\t{\n\t\t\t\tcase 27:\n\t\t\t\t\t// esc\n\t\t\t\t\twindow.location.href = userData.urls.close;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37:\n\t\t\t\t\t// left\n\t\t\t\t\tif (userData.urls.prev)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.href = userData.urls.prev;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t// right\n\t\t\t\t\tif (userData.urls.next)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.location.href = userData.urls.next;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\t// update url\n\t\tif (history.pushState)\n\t\t{\n\t\t\tvar path = window.location.pathname + window.location.search;\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'index'\n\t\t\t\t,url : userData.urls.close\n\t\t\t}, userData.title, userData.urls.close);\n\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'article'\n\t\t\t\t,url : path\n\t\t\t}, $('title').text(), path);\n\t\t}\n\t};\n\n\t// update like\n\tthis.onLike = function(srl, $target)\n\t{\n\t\t$.get(this.root + '/updateLike/' + srl, function(res){\n\t\t\tres = JSON.parse(res);\n\t\t\tif (res.state == 'success')\n\t\t\t{\n\t\t\t\t$target.text(res.count);\n\t\t\t\t$body.off('click', 'button.likeArticle');\n\t\t\t\t$target.parent().addClass('disabled');\n\t\t\t}\n\t\t});\n\t};\n\n\tthis.destroy = function()\n\t{\n\n\t}\n}\n","function Index(userData)\n{\n\t// set variables\n\tvar self = this;\n\tvar $$ = {\n\t\titems : $('#items')\n\t\t,body : $('html, body')\n\t\t,category : $('#categoryList')\n\t\t,loading : null\n\t};\n\n\twindow.article = new Article();\n\tarticle.root = userData.root;\n\n\t// item size to class\n\tvar itemSizeToClass = function(w, h)\n\t{\n\t\tvar str = '';\n\t\tstr += (w == 470) ? ' wx2' : '';\n\t\tstr += (h == 470) ? ' hx2' : '';\n\t\treturn str;\n\t};\n\n\t// update url\n\tthis.updateUrl = function(url)\n\t{\n\t\tvar params = null;\n\t\tvar urlArray = url.split('?');\n\t\tvar str = '';\n\n\t\tif (urlArray[1])\n\t\t{\n\t\t\tparams = JSON.parse('{\"' + decodeURI(urlArray[1]).replace(/\"/g, '\\\\\"').replace(/&/g, '\",\"').replace(/=/g,'\":\"') + '\"}');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tparams = new Object();\n\t\t}\n\n\t\tparams.page = (params.page) ? parseInt(params.page) + 1 : 2;\n\n\t\tfor (var key in params)\n\t\t{\n\t\t\tif (str != \"\")\n\t\t\t{\n\t\t\t\tstr += \"&\";\n\t\t\t}\n\t\t\tstr += key + \"=\" + params[key];\n\t\t}\n\t\tparams = str;\n\n\t\treturn urlArray[0] + '?' + params;\n\t};\n\n\t// load items\n\tthis.loadItems = function(url, func)\n\t{\n\t\t$.ajax({\n\t\t\ttype : 'get'\n\t\t\t,url : url\n\t\t\t,dataType : 'json'\n\t\t\t,timeout : 3000\n\t\t\t,error : function(request, status, error)\n\t\t\t{\n\t\t\t\tlog('error message');\n\t\t\t\tlog(error);\n\t\t\t}\n\t\t\t,success : function(res, status, req)\n\t\t\t{\n\t\t\t\tvar markup = '';\n\t\t\t\tvar $newItems = null;\n\t\t\t\tvar sizeClass = null;\n\t\t\t\tfor (var i=0; i<res.length; i++)\n\t\t\t\t{\n\t\t\t\t\tsizeClass = itemSizeToClass(res[i].width, res[i].height);\n\t\t\t\t\tif (res[i].more)\n\t\t\t\t\t{\n\t\t\t\t\t\tmarkup += '<a href=\"#\" class=\"item more\" title=\"more item\"><span><em><i>More item</i></em></span></a>';\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\tmarkup += '<div class=\"item' + sizeClass + '\"><a href=\"' + res[i].url + '\"><img src=\"' + res[i].img + '\" alt=\"' + res[i].title + '\" /></a></div>';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$newItems = $(markup);\n\n\t\t\t\t// click item\n\t\t\t\t$newItems.not('div.more').children('a').on('click', function(e){\n\t\t\t\t\tif (window.history.pushState)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.history.pushState({\n\t\t\t\t\t\t\ttype : 'index'\n\t\t\t\t\t\t\t,url : window.location.pathname + window.location.search\n\t\t\t\t\t\t}, userData.title, window.location.pathname + window.location.search);\n\t\t\t\t\t}\n\t\t\t\t\t$(this).closest('div.item').addClass('view');\n\t\t\t\t\tview.open($(this).attr('href'), true);\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\n\t\t\t\t// more event\n\t\t\t\t$newItems.filter('.more').on('click', function(e){\n\t\t\t\t\tvar $more = $(this);\n\t\t\t\t\tuserData.loadItemsUrl = self.updateUrl(userData.loadItemsUrl);\n\n\t\t\t\t\tvar url = self.updateUrl(window.location.pathname + location.search);\n\t\t\t\t\tif (window.history.pushState)\n\t\t\t\t\t{\n\t\t\t\t\t\twindow.history.pushState({}, userData.title, url);\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.gotoTop = $more.offset().top;\n\n\t\t\t\t\t$more.off('click');\n\t\t\t\t\t$more.addClass('loading');\n\t\t\t\t\t$$.loading = $more;\n\n\t\t\t\t\tself.loadItems(userData.loadItemsUrl, function(){\n\t\t\t\t\t\t$more.next().find('a').focus();\n\t\t\t\t\t});\n\n\t\t\t\t\treturn false;\n\t\t\t\t});\n\n\t\t\t\t$newItems.imagesLoaded(function(){\n\t\t\t\t\tif ($$.loading)\n\t\t\t\t\t{\n\t\t\t\t\t\tmasonry.remove($$.loading);\n\t\t\t\t\t\t$$.loading = null;\n\t\t\t\t\t}\n\t\t\t\t\tif (masonry)\n\t\t\t\t\t{\n\t\t\t\t\t\t$$.items.masonry()\n\t\t\t\t\t\t\t.append($newItems)\n\t\t\t\t\t\t\t.masonry('appended', $newItems)\n\t\t\t\t\t\t\t.masonry('layout')\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t{\n\t\t\t\t\t\t$$.items\n\t\t\t\t\t\t\t.append($newItems)\n\t\t\t\t\t\t\t.masonry(masonryOptions)\n\t\t\t\t\t\t;\n\t\t\t\t\t\tmasonry = $$.items.data('masonry');\n\t\t\t\t\t\tmasonry.on('layoutComplete', window.masonryLayoutComplete);\n\t\t\t\t\t}\n\t\t\t\t\tif (func)\n\t\t\t\t\t{\n\t\t\t\t\t\tfunc();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t};\n\n\n\t/* E V E N T S */\n\t// layout complete\n\twindow.masonryLayoutComplete = function()\n\t{\n\t\tif (window.gotoTop)\n\t\t{\n\t\t\twindow.gotoTop = window.gotoTop - userData.paddingTop;\n\t\t\t$$.body.animate({scrollTop:window.gotoTop}, 400, 'swing');\n\t\t\twindow.gotoTop = null;\n\t\t}\n\t};\n\n\n\t/* A C T I O N */\n\n\t$('body').append('<div id=\"View_bg\"></div><section id=\"View\"></section>');\n\n\twindow.view = new View(userData);\n\n\t// set masonry options\n\twindow.masonryOptions = {\n\t\titemSelector: '.item'\n\t\t,columnWidth: '.grid-sizer'\n\t\t//,isAnimated: true\n\t\t//,transitionDuration : '.3s'\n\t};\n\twindow.masonry = null;\n\n\t// toggle category list\n\t$('#toggleCategory').on('click', function(){\n\t\t$(this).toggleClass('on');\n\t\t$$.category.children('ul').toggleClass('on');\n\t});\n\n\t// load items\n\tthis.loadItems(userData.loadItemsUrl);\n\n\tif (window.history.pushState)\n\t{\n\t\tvar path = window.location.pathname + window.location.search;\n\t\twindow.history.pushState({type:'index'}, userData.title, path);\n\t}\n}","var View = function(userData) {\n\n\t// private variables\n\tvar self = this;\n\tvar dom = {\n\t\tindex : $('#Index')\n\t\t,items : $('#items')\n\t\t,view : $('#View')\n\t\t,bg : $('#View_bg')\n\t\t,title : $('head > title')\n\t\t,topNav : $('#topNav')\n\t\t,body : $('html, body')\n\t};\n\tvar speed = 300;\n\tvar $html = $('html');\n\n\t// public variables\n\tthis.active = false;\n\tthis.path = null;\n\n\n\t/*----------------------------------------*\\\n\t * PRIVATE METHOD\n\t\\*----------------------------------------*/\n\n\t/**\n\t * init\n\t */\n\tvar init = function() {}\n\n\n\t/**\n\t * manage direction buttons\n\t * \n\t * @Param {DOM} $article\n\t * @Return void\n\t */\n\tvar directionButtons = function($article)\n\t{\n\t\tif ($article.attr('data-prev'))\n\t\t{\n\t\t\t$('button.prevView').removeClass('disabled');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('button.prevView').addClass('disabled');\n\t\t}\n\t\tif ($article.attr('data-next'))\n\t\t{\n\t\t\t$('button.nextView').removeClass('disabled');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('button.nextView').addClass('disabled');\n\t\t}\n\t};\n\n\t/**\n\t * update url\n\t * \n\t * @Param {Boolean} sw : write history\n\t * @Param {String} title\n\t * @Param {String} url\n\t * @Return void\n\t */\n\tvar updateURL = function(sw, title, url)\n\t{\n\t\tself.path = window.location.pathname + window.location.search;\n\t\tif (sw && window.history.pushState)\n\t\t{\n\t\t\tdom.title.text(title);\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'article'\n\t\t\t\t,url : url\n\t\t\t}, title, url);\n\t\t}\n\t};\n\n\n\t/*----------------------------------------*\\\n\t * PUBLIC METHOD\n\t\\*----------------------------------------*/\n\t\n\t/**\n\t * open view\n\t * \n\t * @Param {String} url\n\t * @Param {Boolean} sw : write history\n\t * @Return void\n\t */\n\tthis.open = function(url, sw)\n\t{\n\t\tself.active = true;\n\t\t$html.removeClass('scroll');\n\t\tdom.view.show();\n\t\tdom.bg.fadeIn(speed, function(){\n\t\t\tif (masonry)\n\t\t\t{\n\t\t\t\tmasonry.destroy();\n\t\t\t\tmasonry = null;\n\t\t\t}\n\t\t\tdom.index.hide();\n\t\t\tdom.view.load(url + ' #Article', function(){\n\t\t\t\t$('html').addClass('mode-view');\n\t\t\t\t$('#topNav').addClass('on');\n\n\t\t\t\tupdateURL(sw, $(this).children().attr('data-title'), url);\n\t\t\t\tdirectionButtons($(this).children());\n\t\t\t});\n\t\t});\n\n\t\t// keyboard event\n\t\t$html.on('keyup.gooseView', function(e){\n\t\t\tvar $article = dom.view.children();\n\t\t\tswitch(e.keyCode)\n\t\t\t{\n\t\t\t\tcase 27:\n\t\t\t\t\t// esc\n\t\t\t\t\tself.close();\n\t\t\t\t\tbreak;\n\t\t\t\tcase 37:\n\t\t\t\t\t// left\n\t\t\t\t\tif ($article.attr('data-prev'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.go($article.attr('data-prev'));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 39:\n\t\t\t\t\t// right\n\t\t\t\t\tif ($article.attr('data-next'))\n\t\t\t\t\t{\n\t\t\t\t\t\tself.go($article.attr('data-next'));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t};\n\n\t/**\n\t * close view\n\t * \n\t * @Param {Boolean} sw\n\t * @Return void\n\t */\n\tthis.close = function(sw)\n\t{\n\t\tself.active = false;\n\t\t$('button.closeView').off('click');\n\t\t$('html').off('keyup.gooseView').addClass('scroll');\n\t\t$('#topNav').removeClass('on');\n\t\tdom.index.show();\n\t\tdom.items.masonry(masonryOptions);\n\t\twindow.masonry = dom.items.data('masonry');\n\t\tmasonry.on('layoutComplete', window.masonryLayoutComplete);\n\t\tdom.bg.fadeOut(speed);\n\t\tdom.view.fadeOut(speed, function(){\n\t\t\t$('html').removeClass('mode-view');\n\t\t\t$(this).empty();\n\t\t\tvar $viewItem = dom.items.children('div.view');\n\t\t\tvar targetTop = $viewItem.offset().top - userData.paddingTop;\n\t\t\tif (targetTop > 220)\n\t\t\t{\n\t\t\t\tdom.body.scrollTop(targetTop);\n\t\t\t}\n\t\t\t$viewItem.removeClass('view');\n\t\t});\n\t\tif (sw && window.history.pushState)\n\t\t{\n\t\t\tdom.title.text(userData.title);\n\t\t\twindow.history.pushState({\n\t\t\t\ttype : 'index'\n\t\t\t\t,url : self.path\n\t\t\t}, userData.title, self.path);\n\t\t}\n\t\tself.path = null;\n\t};\n\n\t/**\n\t * go view\n\t * \n\t * @Param {String} url : url address\n\t * @Return void\n\t */\n\tthis.go = function(url)\n\t{\n\t\tdom.view.load(url + ' #Article', function(){\n\t\t\tupdateURL(true, $(this).children().attr('data-title'), url);\n\t\t\tdirectionButtons($(this).children());\n\t\t});\n\t};\n\n\t// action\n\tinit();\n};","jQuery(function($){\n\n\t// check touch mode\n\tif ('ontouchstart' in document.documentElement)\n\t{\n\t\t$('html').addClass('touch');\n\t}\n\telse\n\t{\n\t\t$('html').addClass('no-touch');\n\t}\n\n\t// toggle local navigation\n\t$('#toggleNavigation').on('click', function(){\n\t\t$('#header > nav.lnb').toggleClass('on');\n\t});\n\n\t// navigation event for touch device\n\tvar $lnb = $('html.touch #header > nav.lnb');\n\tvar flag = false;\n\t$lnb.find('> ul.dep1 > li > a').on('touchend click', function(){\n\t\tvar $li = $(this).parent();\n\t\tif (!flag) {\n\t\t\tflag = true;\n\t\t\tsetTimeout(function(){ flag = false; }, 200);\n\t\t\t// ipad\n\t\t\tif ($(window).width() > 640)\n\t\t\t{\n\t\t\t\tif ($li.hasClass('on'))\n\t\t\t\t{\n\t\t\t\t\t$li.removeClass('on');\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t$li.parent().children().removeClass('on');\n\t\t\t\t\t$li.addClass('on');\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t});\n\n\t// navigation focus event\n\t$('#header > nav.lnb > ul.dep1 > li')\n\t\t.on('focusin', function(){\n\t\t\t$(this).addClass('on');\n\t\t})\n\t\t.on('focusout', function(){\n\t\t\t$(this).removeClass('on');\n\t\t})\n\t;\n\n\t// change page event\n\t$(window).on(\"popstate\", function(event) {\n\t\tvar data = event.originalEvent.state;\n\t\tif (data)\n\t\t{\n\t\t\tswitch(data.type)\n\t\t\t{\n\t\t\t\t// go index\n\t\t\t\tcase 'index':\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (view.active)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview.close(false);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t// go article\n\t\t\t\tcase 'article':\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (view)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\t$('#items').find('a[href=\"' + data.url + '\"]').closest('div.item').addClass('view');\n\t\t\t\t\t\t\tview.open(data.url, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t});\n\n\n\t// navigation - active position\n\t$('#header li.active').closest('div').parent().addClass('active');\n\n\n\t// resize event\n\t$(window).on('resize', function(){\n\t\tif ($(window).width() < 640)\n\t\t{\n\t\t\t$('html').addClass('mini');\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$('html').removeClass('mini');\n\t\t}\n\t});\n\t$(window).trigger('resize');\n\n\n\t// 비동기로 article을 열었을때의 버튼 이벤트 초기화\n\tvar $body = $('body');\n\ttry {\n\t\t// close view button event\n\t\t$body.on('click', 'button.closeView', function(){\n\t\t\tview.close(true);\n\t\t});\n\n\t\t// like button evenr\n\t\t$body.on('click', 'button.likeArticle', function(){\n\t\t\tif (!$(this).hasClass('disabled'))\n\t\t\t{\n\t\t\t\tvar srl = parseInt($(this).attr('data-srl'));\n\t\t\t\tarticle.onLike(srl, $(this).children('em'));\n\t\t\t}\n\t\t});\n\t\n\t\t// prev view event\n\t\t$body.on('click', 'button.prevView', function(){\n\t\t\tif (!$(this).hasClass('disabled'))\n\t\t\t{\n\t\t\t\tview.go($('#Article').attr('data-prev'));\n\t\t\t}\n\t\t});\n\n\t\t// next view event\n\t\t$body.on('click', 'button.nextView', function(){\n\t\t\tif (!$(this).hasClass('disabled'))\n\t\t\t{\n\t\t\t\tview.go($('#Article').attr('data-next'));\n\t\t\t}\n\t\t});\n\t} catch(e) {}\n\n\t// Google Analytics\n\t(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n\t\t\t(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\t\tm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\n\tga('create', 'UA-42563094-1', 'redgoose.me');\n\tga('send', 'pageview');\n});"],"sourceRoot":"/source/"}