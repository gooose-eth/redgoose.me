{"version":3,"file":"redgoose.js","sources":["../src/js/util.js","../src/js/preference.js","../src/js/Header.js","../src/js/AppHistory.js","../src/js/Index.js","../src/js/Article.js","../src/js/etc.js","../src/js/redgoose.js"],"sourcesContent":["\n/**\n * Get window size\n *\n * @return {Object}\n */\nexport function getWindowSize()\n{\n\treturn {\n\t\twidth: window.innerWidth,\n\t\theight: window.innerHeight\n\t};\n}\n\n\n/**\n * is touch device\n *\n * @return {Boolean}\n */\nexport function isTouchDevice()\n{\n\treturn 'ontouchstart' in window || navigator.maxTouchPoints;\n}\n\n\n/**\n * sleep\n *\n * @param {Number} delay\n * @return {Promise}\n */\nexport function sleep(delay)\n{\n\treturn new Promise(function(resolve) {\n\t\tsetTimeout(resolve, delay);\n\t});\n}\n\n\n/**\n * printf\n *\n * @param {String} str\n * @param {String} values\n */\nexport function printf(str, ...values)\n{\n\tfor (let i = 0; i < values.length; i++)\n\t{\n\t\tlet pattern = `\\\\{${i}\\\\}`;\n\t\tlet replace = new RegExp(pattern, 'g');\n\t\tstr = str.replace(replace, values[i]);\n\t}\n\treturn str;\n}","\n// set size\nexport const SIZE_MOBILE = 640;\nexport const SIZE_TABLET = 768;\nexport const SIZE_ARTICLE = 900;\n\n\n","import $ from 'jQuery';\nimport * as util from './util';\nimport * as preference from './preference';\n\n\n/**\n * Header\n */\nexport default function Header()\n{\n\tconst self = this;\n\tthis.$header = $('.layout-header');\n\tthis.$gnb = this.$header.find('.gnb');\n\n\t/**\n\t * Toggle gnb from mobile\n\t */\n\tfunction toggleGnbFromMobile()\n\t{\n\t\tself.$header.find('.toggle-gnb').on('click', function() {\n\t\t\t$(this).toggleClass('toggle-gnb-active');\n\t\t\tself.$gnb.toggleClass('gnb-active');\n\t\t});\n\t}\n\n\t/**\n\t * gnb event for touch\n\t * 터치 디바이스이며 모바일보다 큰 사이즈라면 터치 작동에 대한 대응\n\t *\n\t */\n\tfunction gnbEventForTouch()\n\t{\n\t\tif (util.isTouchDevice() && preference.SIZE_MOBILE < util.getWindowSize().width)\n\t\t{\n\t\t\tself.$gnb.find('.gnb__dep-1 > li > a').on('click', false);\n\t\t}\n\t}\n\n\n\tthis.init = function()\n\t{\n\t\tgnbEventForTouch();\n\t\ttoggleGnbFromMobile();\n\t}\n\n}","\nexport default function AppHistory() {\n\n\t/**\n\t * check support\n\t *\n\t * @Return {Boolean}\n\t */\n\tfunction support()\n\t{\n\t\treturn !!history.pushState;\n\t}\n\n\t/**\n\t * Push state\n\t *\n\t * @Param {Object} env\n\t * @Param {String} title\n\t * @Param {String} url\n\t */\n\tthis.push = function(env, title, url)\n\t{\n\t\tif (!support()) return;\n\t\tif (!url) return;\n\n\t\thistory.pushState(\n\t\t\tenv || null,\n\t\t\ttitle || url,\n\t\t\turl\n\t\t);\n\t};\n\n\t/**\n\t * Replace state\n\t *\n\t * @Param {Object} env\n\t * @Param {String} title\n\t * @Param {String} url\n\t */\n\tthis.replace = function(env, title, url)\n\t{\n\t\tif (!support()) return;\n\t\tif (!url) return;\n\n\t\thistory.replaceState(\n\t\t\tenv || null,\n\t\t\ttitle || url,\n\t\t\turl\n\t\t);\n\t};\n\n\t/**\n\t * initial history pop event\n\t */\n\tthis.initPopEvent = function()\n\t{\n\t\tfunction onPopState(e)\n\t\t{\n\t\t\tconsole.log('on pop state');\n\t\t}\n\n\t\twindow.addEventListener('popstate', onPopState);\n\t}\n}","import $ from 'jQuery';\nimport Masonry from 'Masonry';\n\nimport * as util from './util';\nimport AppHistory from './AppHistory';\n\n\nconst SCROLL_OFFSET = 30;\nconst SCROLL_SPEED = 300;\nconst BLOCK_DELAY = 80;\nconst LOAD_PAGE_PER_SIZE = 20;\nconst appHistory = new AppHistory();\n\n\nexport default function Index(parent)\n{\n\tconst self = this;\n\n\tthis.srls = {};\n\tthis.options = {};\n\tthis.scrollTimer = null;\n\tthis.selector_articles = '#articles';\n\tthis.$index = $('.index');\n\tthis.$articles = this.$index.find('.index__articles');\n\tthis.$category = this.$index.find('.index__categories');\n\tthis.$more = this.$index.find('.index__loadMore');\n\tthis.masonry = null;\n\n\t// masonry\n\tfunction masonry()\n\t{\n\t\tself.$articles.addClass('masonry');\n\t\tself.masonry = new Masonry(self.selector_articles, {\n\t\t\titemSelector: '.grid-item',\n\t\t\tcolumnWidth: '.grid-sizer',\n\t\t\ttransitionDuration : '0s',\n\t\t\thiddenStyle : {},\n\t\t\tvisibleStyle : {}\n\t\t});\n\t}\n\n\t/**\n\t * more articles\n\t * 아이템을 더 불러왔을때..\n\t *\n\t * @param {Number} page\n\t * @return {Promise}\n\t */\n\tasync function moreArticles(page)\n\t{\n\t\tlet response = null;\n\n\t\t// turn on loading\n\t\tmoreButton(false);\n\n\t\t// get articles\n\t\ttry\n\t\t{\n\t\t\tresponse = await $.ajax({\n\t\t\t\turl: `${parent.options.root}/ajax/`,\n\t\t\t\ttype: 'post',\n\t\t\t\tdata: {\n\t\t\t\t\tpage,\n\t\t\t\t\tsize: self.options.size,\n\t\t\t\t\tfield: 'srl,title,category_srl,json',\n\t\t\t\t},\n\t\t\t\tdataType: 'json',\n\t\t\t});\n\t\t}\n\t\tcatch(e)\n\t\t{\n\t\t\talert('Server error');\n\t\t\tconsole.error(e);\n\t\t\tmoreButton(true);\n\t\t\treturn false;\n\t\t}\n\n\t\t// update index\n\t\tawait updateIndex(response, true, true);\n\n\t\t// update more button\n\t\tself.$more.children('a').attr('data-next', response.nextpage);\n\n\t\t// refresh masonry layout\n\t\tself.masonry.layout();\n\n\t\t// turn off loading\n\t\tmoreButton(true);\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * update index\n\t *\n\t * @param {Object} res\n\t * @param {Boolean} showAnimation\n\t * @param {Boolean} useScroll\n\t */\n\tasync function updateIndex(res, showAnimation=false, useScroll=false)\n\t{\n\t\tif (!res.nextpage)\n\t\t{\n\t\t\tself.$more.remove();\n\t\t}\n\n\t\t// check articles\n\t\tif (!(res.articles && res.articles.length)) return;\n\n\t\t// make article template\n\t\tlet appendElements = res.articles.map((item, key) => {\n\t\t\tlet url = `${parent.options.root}/article/${self.options.nest || ''}${item.srl}`;\n\t\t\tlet image = `${parent.options.gooseRoot}/${item.json.thumbnail.url}`;\n\t\t\tlet className = `grid-item grid-item__hidden ${item.size_className}`;\n\t\t\treturn `<div class=\"${className}\">` +\n\t\t\t\t`<a href=\"${url}\" title=\"${item.title}\">` +\n\t\t\t\t`<figure style=\"background-image: url('${image}')\">` +\n\t\t\t\t`${item.title}` +\n\t\t\t\t`</figure>` +\n\t\t\t\t`</a>` +\n\t\t\t\t`</div>`;\n\t\t}).join('');\n\n\t\t// append articles\n\t\tlet $appendElements = $(appendElements);\n\t\tself.$articles.append($appendElements);\n\t\tself.masonry.appended($appendElements);\n\n\t\t// play animation blocks\n\t\tif (showAnimation)\n\t\t{\n\t\t\tanimationBlocks($appendElements);\n\t\t}\n\n\t\t// move scroll\n\t\tif (useScroll)\n\t\t{\n\t\t\tlet $firstElement = $appendElements.eq(0);\n\t\t\tlet top = $firstElement.offset().top - SCROLL_OFFSET;\n\t\t\t$firstElement.attr('data-page', res.currentPage);\n\t\t\t$(\"html, body\").stop().animate({ scrollTop: top }, SCROLL_SPEED, 'swing');\n\t\t}\n\t}\n\n\t/**\n\t * show animation block\n\t *\n\t * @param {Object} $blocks\n\t */\n\tfunction animationBlocks($blocks)\n\t{\n\t\t$blocks.each(function(key) {\n\t\t\tsetTimeout(() => {\n\t\t\t\t$(this).removeClass('grid-item__hidden');\n\t\t\t}, BLOCK_DELAY * key);\n\t\t});\n\t}\n\n\t/**\n\t * control more button\n\t * 더 불러오기 버튼의 상태가 변한다.\n\t *\n\t * @param {Boolean} sw\n\t */\n\tfunction moreButton(sw)\n\t{\n\t\t// more load articles\n\t\tfunction loadMoreTrigger()\n\t\t{\n\t\t\tmoreArticles(this.dataset.next).then();\n\t\t\treturn false;\n\t\t}\n\n\t\tif (sw)\n\t\t{\n\t\t\tself.$more.children('a').on('click', loadMoreTrigger);\n\t\t\tself.$more.removeClass('loadMore-loading');\n\t\t}\n\t\telse\n\t\t{\n\t\t\tself.$more.children('a').off('click');\n\t\t\tself.$more.addClass('loadMore-loading');\n\t\t}\n\t}\n\n\t// toggle category\n\tfunction toggleCategory()\n\t{\n\t\t$(this).toggleClass('categories__toggle-active');\n\t\t$(this).next().toggleClass('categories__index-active');\n\t}\n\n\t/**\n\t * scroll event\n\t *\n\t * @param {Boolean} sw\n\t */\n\tfunction scrollEvent(sw)\n\t{\n\t\tconst delay = 100;\n\n\t\tfunction action()\n\t\t{\n\t\t\tconst $el = self.$articles.children('[data-page]');\n\t\t\tconst top = $(this).scrollTop();\n\t\t\tlet $current = null;\n\n\t\t\tif (!$el.length) return false;\n\n\t\t\t$el.each(function(key) {\n\t\t\t\tif (top >= ($(this).offset().top - (SCROLL_OFFSET + 5)))\n\t\t\t\t{\n\t\t\t\t\t$current = $(this);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// update page\n\t\t\tlet page = ($current && $current.length) ? $current.data('page') : 1;\n\t\t\tupdatePage(page);\n\t\t}\n\n\t\tif (sw)\n\t\t{\n\t\t\t$(window).on('scroll', function() {\n\t\t\t\t// 너무많은 스크롤 이벤트가 트리깅 하는것을 방지하기 위하여 셋 타임아웃을 걸어놓았다.\n\t\t\t\tclearTimeout(self.scrollTimer);\n\t\t\t\tself.scrollTimer = setTimeout(action, delay);\n\t\t\t});\n\t\t}\n\t\telse\n\t\t{\n\t\t\t$(window).off('scroll');\n\t\t}\n\t}\n\n\t/**\n\t * update page\n\t *\n\t */\n\tfunction updatePage(page)\n\t{\n\t\tif (!URL) return;\n\n\t\tlet url = new URL(window.location.href);\n\t\tlet newUrl = '';\n\t\tlet urlParams = url.searchParams;\n\t\tlet urlPage = url.searchParams.get('page');\n\t\turlPage = urlPage ? parseInt(urlPage) : 1;\n\n\t\tif (page === urlPage) return;\n\n\t\tif (page === 1)\n\t\t{\n\t\t\turlParams.delete('page');\n\t\t}\n\t\telse\n\t\t{\n\t\t\turlParams.set('page', page);\n\t\t}\n\n\t\tnewUrl = location.pathname + (urlParams.toString() ? `?${urlParams.toString()}` : '');\n\n\t\tconsole.log(newUrl);\n\n\t\tappHistory.replace(\n\t\t\t{ url: newUrl, type: 'index' },\n\t\t\tnull,\n\t\t\tnewUrl\n\t\t);\n\t\t// TODO : 스크롤 끝에 도달하면 마지막 페이지 엘리먼트에 있는 페이지 번호값을 가져와서 업데이트 하기.\n\t\t// TODO : 왜냐하면 마지막 페이지의 갯수가 부족한데 스크롤에 의해서 업데이트가 안되는 현상이 있음.\n\t}\n\n\t/**\n\t * METHODS\n\t */\n\n\t/**\n\t * init\n\t *\n\t * @param {Object} options\n\t */\n\tthis.init = function(options={})\n\t{\n\t\tif (!this.$articles.length) return false;\n\n\t\t// set srls\n\t\tthis.srls.nest = options.nest_srl;\n\t\tthis.srls.category = options.category_srl;\n\n\t\t// set options\n\t\tthis.options.size = options.size || LOAD_PAGE_PER_SIZE;\n\n\t\t// set toggle category for mobile\n\t\tthis.$category.children('.categories__toggle').on('click', toggleCategory);\n\n\t\t// initial history pop state event\n\t\tappHistory.initPopEvent();\n\n\t\t// set masonry\n\t\tmasonry();\n\n\t\tself.$more.children('a').attr('href', 'javascript:;');\n\n\t\t// set more articles event\n\t\tmoreButton(true);\n\n\t\t// set change page sensor\n\t\t// TODO: 모바일에서 스크롤 이벤트가 발생 안하는 방안도 생각해봐야함. more 누르면 업데이트\n\t\tscrollEvent(true);\n\t}\n\n}","export default function Article()\n{\n\n}","\n// default options\nexport const defaultOptions = {\n\troot: '',\n\tgooseRoot: '',\n\tdebug: false,\n};\n\n\n/**\n * init google analytics\n *\n * @param {Boolean} sw\n */\nexport function initGoogleAnalytics(sw)\n{\n\tif (!sw) return null;\n\n\t// Google Analytics\n\t(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n\t\t(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\t\tm=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t})(window,document,'script','//www.google-analytics.com/analytics.js','ga');\n\tga('create', 'UA-42563094-1', 'redgoose.me');\n\tga('send', 'pageview');\n}\n","import Header from './Header';\nimport Index from './Index';\nimport Article from './Article';\nimport * as etc from './etc';\n\n\n/**\n * Redgoose\n *\n * @param {Object} options\n */\nfunction Redgoose(options)\n{\n\t// assign options\n\tthis.options = Object.assign({}, etc.defaultOptions, options);\n\n\t// init header\n\tthis.header = new Header(this);\n\n\t// init index\n\tthis.index = new Index(this);\n\n\t// init article\n\tthis.article = new Article(this);\n\n\t// init google analytics\n\tetc.initGoogleAnalytics(false);\n\n}\n\n\nexport default Redgoose;"],"names":["getWindowSize","window","innerWidth","innerHeight","isTouchDevice","navigator","maxTouchPoints","SIZE_MOBILE","Header","self","$header","$","$gnb","find","toggleGnbFromMobile","on","toggleClass","gnbEventForTouch","util","preference","width","init","AppHistory","support","history","pushState","push","env","title","url","replace","replaceState","initPopEvent","onPopState","e","log","addEventListener","SCROLL_OFFSET","SCROLL_SPEED","BLOCK_DELAY","LOAD_PAGE_PER_SIZE","appHistory","Index","parent","srls","options","scrollTimer","selector_articles","$index","$articles","$category","$more","masonry","addClass","Masonry","moreArticles","page","response","ajax","root","size","error","updateIndex","children","attr","nextpage","layout","res","showAnimation","useScroll","remove","articles","length","appendElements","map","item","key","nest","srl","image","gooseRoot","json","thumbnail","className","size_className","join","$appendElements","append","appended","$firstElement","eq","top","offset","currentPage","stop","animate","scrollTop","animationBlocks","$blocks","each","removeClass","moreButton","sw","loadMoreTrigger","dataset","next","then","off","toggleCategory","scrollEvent","delay","action","$el","$current","data","setTimeout","updatePage","URL","location","href","newUrl","urlParams","searchParams","urlPage","get","parseInt","delete","set","pathname","toString","type","nest_srl","category","category_srl","Article","defaultOptions","initGoogleAnalytics","i","s","o","g","r","a","m","q","arguments","l","Date","createElement","getElementsByTagName","async","src","parentNode","insertBefore","document","Redgoose","Object","assign","etc","header","index","article"],"mappings":"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"}